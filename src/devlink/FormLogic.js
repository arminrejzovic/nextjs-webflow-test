"use client";
import React from "react";
import * as _Builtin from "./_Builtin";

export function FormLogic({ as: _Component = _Builtin.Block }) {
  return (
    <_Component tag="div">
      <_Builtin.HtmlEmbed
        className="hidden-form-styling"
        value="%3C!--%20%20jQuery%20Datepicker%20style%20--%3E%0A%3C!--%3Clink%20rel%3D%22stylesheet%22%20href%3D%22https%3A%2F%2Fcode.jquery.com%2Fui%2F1.13.1%2Fthemes%2Fsmoothness%2Fjquery-ui.min.css%22%2F%3E--%3E%0A%3C!--%20%20International%20Telephone%20Input%20--%3E%0A%3Clink%20rel%3D%22stylesheet%22%20href%3D%22https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fintl-tel-input%4020.0.4%2Fbuild%2Fcss%2FintlTelInput.css%22%3E%0A%0A%3C!--%20FORM%20STYLING%20--%3E%0A%3Cstyle%3E%0A%20%20.form__input--date%5Breadonly%5D%20%7B%0A%20%20%20%20background-color%3A%20var(--white)%3B%0A%20%20%20%20cursor%3A%20initial%3B%0A%20%20%7D%0A%20%20%0A%20%20.btn.btn--form.events-none%20%7B%0A%20%20%09pointer-events%3A%20none%3B%0A%20%20%7D%0A%20%20%0A%20%20.form__group.is--val-error%20.appointment-box%20%7B%0A%20%20%09border-color%3A%20%23c02b0a%3B%0A%20%20%7D%0A%0A%20%20%2F*%20International%20Telephone%20Input%20*%2F%0A%20%20.iti%20%7B%0A%20%20%20%20width%3A%20100%25%3B%0A%20%20%7D%0A%0A%20%20%2F*%20Calendar%20-%20jQuery%20Datepicker%20*%2F%0A%20%20%2F*%0A%20%20.ui-datepicker%20%7B%0A%20%20font-family%3A%20'Avenir'%3B%0A%20%20background%3A%20%23fff%3B%0A%20%20border%3A%201px%20solid%20%23d0d1d3%3B%0A%20%20border-radius%3A%203px%3B%0A%20%20box-shadow%3A%200%20.0625rem%20.25rem%20rgba(0%2C0%2C0%2C.11)%2C0%200%20.25rem%20rgba(18%2C25%2C97%2C.041)%3B%0A%20%20color%3A%20var(--body-color)%3B%0A%20%20font-size%3A%2014px%3B%0A%20%20font-weight%3A%20500%3B%0A%20%20margin-top%3A%205px%3B%0A%20%20padding%3A%2018px%2015px%3B%0A%20%20width%3A%20min(382px%2Ccalc(100vw%20-%2032px))%3B%0A%20%20z-index%3A%20999%20!important%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20table%2C%0A%20%20.ui-datepicker%20td%2C%0A%20%20.ui-datepicker%20th%2C%0A%20%20.ui-datepicker%20thead%2C%0A%20%20.ui-datepicker%20tr%20%7B%0A%20%20background%3A%20none%3B%0A%20%20border%3A%200%3B%0A%20%20margin%3A%200%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20td%2C%0A%20%20.ui-datepicker%20th%20%7B%0A%20%20padding%3A%205px%3B%0A%20%20text-shadow%3A%20none%3B%0A%20%20text-transform%3A%20none%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-header%20%7B%0A%20%20border%3A%200%3B%0A%20%20display%3A%20flex%3B%0A%20%20flex-direction%3A%20row%3B%0A%20%20justify-content%3A%20center%3B%0A%20%20margin%3A%200%200%205px%3B%0A%20%20padding%3A%200%3B%0A%20%20position%3A%20relative%3B%0A%20%20width%3A%20100%25%3B%0A%20%20background%3A%20transparent%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-state-disabled%2C%0A%20%20.ui-datepicker%20.ui-priority-secondary%7B%0A%20%20opacity%3A%201%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-header%20select.ui-datepicker-month%20%7B%0A%20%20margin-right%3A%2020px%3B%0A%20%20-moz-text-align-last%3A%20right%3B%0A%20%20text-align-last%3A%20right%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20a%2C%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20span%20%7B%0A%20%20font-weight%3A%20400%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20th%20span%20%7B%0A%20%20align-items%3A%20center%3B%0A%20%20color%3A%20%232f4054%3B%0A%20%20display%3A%20flex%3B%0A%20%20font-size%3A%2014px%3B%0A%20%20font-weight%3A%20500%3B%0A%20%20height%3A%2040px%3B%0A%20%20justify-content%3A%20center%3B%0A%20%20width%3A%2040px%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20td%20%7B%0A%20%20font-size%3A%2014px%3B%0A%20%20height%3A%2050px%3B%0A%20%20width%3A%2050px%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20.ui-state-default%20%7B%0A%20%20align-items%3A%20center%3B%0A%20%20background%3A%20none%3B%0A%20%20border%3A%201px%20solid%20transparent%3B%0A%20%20border-radius%3A%20100%25%3B%0A%20%20box-shadow%3A%20none%3B%0A%20%20color%3A%20%232f4054%3B%0A%20%20display%3A%20flex%3B%0A%20%20height%3A%2040px%3B%0A%20%20justify-content%3A%20center%3B%0A%20%20text-decoration%3A%20none%3B%0A%20%20transition%3A%20color%20.3s%20ease%2Cbackground-color%20.3s%20ease%2Cborder-color%20.3s%20ease%3B%0A%20%20width%3A%2040px%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20.ui-state-default%3Afocus%2C%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20.ui-state-default%3Ahover%20%7B%0A%20%20background%3A%20%23fff!important%3B%0A%20%20border-color%3A%20%23008dc0!important%3B%0A%20%20outline%3A%20none!important%3B%0A%20%20color%3A%20var(--primary-color)!important%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20.ui-state-default%3Aactive%20%7B%0A%20%20background%3A%20%23f2f3f5%3B%0A%20%20border-color%3A%20var(--body-color)%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20.ui-datepicker-current-day%20.ui-state-default%20%7B%0A%20%20background%3A%20var(--body-color)!important%3B%0A%20%20border-color%3A%20var(--body-color)!important%3B%0A%20%20box-shadow%3A%200%20.125rem%20.125rem%20rgba(58%2C58%2C87%2C.06)!important%3B%0A%20%20color%3A%20%23fff!important%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20.ui-datepicker-current-day%20.ui-state-default%3Afocus%2C%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20.ui-datepicker-current-day%20.ui-state-default%3Ahover%20%7B%0A%20%20border-color%3A%20var(--body-color)%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20.ui-state-disabled%20%7B%0A%20%20background%3A%20none%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20.ui-state-disabled%20.ui-state-default%20%7B%0A%20%20align-items%3A%20center%3B%0A%20%20background%3A%20%23f2f3f5%3B%0A%20%20border%3A%201px%20solid%20rgba(32%2C32%2C46%2C.079)%3B%0A%20%20border-radius%3A%20100%25%3B%0A%20%20box-shadow%3A%200%20.125rem%20.125rem%20rgba(58%2C58%2C87%2C.06)%3B%0A%20%20color%3A%20%23686e77%3B%0A%20%20cursor%3A%20text%3B%0A%20%20display%3A%20flex%3B%0A%20%20height%3A%2040px%3B%0A%20%20justify-content%3A%20center%3B%0A%20%20text-decoration%3A%20none%3B%0A%20%20width%3A%2040px%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20a.ui-state-default%20%7B%0A%20%20border-color%3A%20var(--primary-color)%3B%0A%20%20background-color%3A%20var(--primary-color)%3B%0A%20%20color%3A%20%23fff%3B%0A%20%20%7D%0A%20%20.ui-datepicker-calendar%20.ui-state-default%3Afocus%2C%0A%20%20.ui-datepicker-calendar%20.ui-state-default%3Ahover%20%7B%0A%20%20background-color%3A%20initial%3B%0A%20%20color%3A%20var(--primary-color)%3B%0A%20%20%7D%0A%20%20.ui-datepicker-calendar%20.ui-datepicker-current-day%20.ui-state-default%20%7B%0A%20%20background-color%3A%20var(--body-color)%3B%0A%20%20border-color%3A%20var(--body-color)%3B%0A%20%20color%3A%20%23fff%3B%0A%20%20%7D%0A%20%20.ui-datepicker-calendar%20td%3Anot(.ui-datepicker-unselectable.ui-state-disabled)%20.ui-state-default%20%7B%0A%20%20background%3A%20var(--primary-color)%3B%0A%20%20border-color%3A%20var(--primary-color)%3B%0A%20%20color%3A%20%23fff%3B%0A%20%20text-shadow%3A%20none%3B%0A%20%20%7D%0A%20%20.ui-datepicker-calendar%20.ui-state-default%3Afocus%2C%0A%20%20.ui-datepicker-calendar%20.ui-state-default%3Ahover%20%7B%0A%20%20border-color%3A%20var(--primary-color)%3B%0A%20%20color%3A%20var(--primary-color)%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-next%2C%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-prev%20%7B%0A%20%20align-items%3A%20center%3B%0A%20%20background%3A%20none%3B%0A%20%20border%3A%200%3B%0A%20%20color%3A%20var(--body-color)%3B%0A%20%20font-family%3A%20%22fontawesome%22%3B%0A%20%20cursor%3A%20pointer%3B%0A%20%20display%3A%20flex%3B%0A%20%20font-size%3A%2014px%3B%0A%20%20height%3A%2030px%3B%0A%20%20justify-content%3A%20center%3B%0A%20%20line-height%3A%201%3B%0A%20%20position%3A%20absolute%3B%0A%20%20text-decoration%3A%20none%3B%0A%20%20top%3A%20-3px%3B%0A%20%20transition%3A%20color%20.3s%20ease%2Cbackground-color%20.3s%20ease%2Cborder-color%20.3s%20ease%3B%0A%20%20width%3A%2030px%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-next%3Afocus%2C%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-next%3Ahover%2C%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-prev%3Afocus%2C%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-prev%3Ahover%20%7B%0A%20%20color%3A%20%23000%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-next%20.ui-icon%2C%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-prev%20.ui-icon%20%7B%0A%20%20display%3A%20none%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-next%3Abefore%2C%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-prev%3Abefore%20%7B%0A%20%20border%3A%200%3B%0A%20%20height%3A%20auto%3B%0A%20%20position%3A%20static%3B%0A%20%20transform%3A%20none%3B%0A%20%20width%3A%20auto%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-prev%20%7B%0A%20%20left%3A%200%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-prev%3Abefore%20%7B%0A%20%20content%3A%20%22%5Cf053%22%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-next%20%7B%0A%20%20right%3A%200%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-header%20.ui-datepicker-next%3Abefore%20%7B%0A%20%20content%3A%20%22%5Cf054%22%3B%0A%20%20%7D%0A%20%20.ui-datepicker%20.ui-datepicker-header%20select%20%7B%0A%20%20background-color%3A%20transparent%3B%0A%20%20border%3A%200%3B%0A%20%20box-shadow%3A%20none%3B%0A%20%20color%3A%20var(--body-color)%3B%0A%20%20cursor%3A%20pointer%3B%0A%20%20display%3A%20inline-block%3B%0A%20%20font-size%3A%2016px%3B%0A%20%20font-weight%3A%20500%3B%0A%20%20height%3A%20auto%3B%0A%20%20min-height%3A%200%3B%0A%20%20padding%3A%200%2010px%200%200%3B%0A%20%20width%3A%20auto%3B%0A%20%20%7D%0A%0A%20%20%40media%20screen%20and%20(max-width%3A%20767px)%20%7B%0A%20%20.ui-datepicker%20td%2C%20.ui-datepicker%20th%20%7B%0A%20%20padding%3A%202px%3B%0A%20%20%7D%0A%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20td%20%7B%0A%20%20height%3A%2042px%3B%0A%20%20width%3A%2042px%3B%0A%20%20%7D%0A%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20.ui-state-disabled%20.ui-state-default%2C%0A%20%20.ui-datepicker%20.ui-datepicker-calendar%20.ui-state-default%20%7B%0A%20%20height%3A%2036px%3B%0A%20%20width%3A%2036px%3B%0A%20%20%7D%0A%0A%20%20.ui-datepicker%20.ui-datepicker-header%20select%20%7B%0A%20%20font-size%3A%2014px%3B%0A%20%20%7D%0A%20%20%7D*%2F%0A%3C%2Fstyle%3E"
      />
      <_Builtin.HtmlEmbed
        className="hidden-form-variables"
        value="%3Cscript%3E%0A%0A%09%2F*%20Site%20Locale%20*%2F%0A%20%20const%20lang%20%3D%20document.documentElement.lang.startsWith('es')%20%3F%20'es'%20%3A%20'en'%3B%0A%20%20const%20locale%20%3D%20document.documentElement.lang%3B%0A%20%20console.log('Current%20language%3A'%2C%20lang)%3B%0A%20%20console.log('Current%20locale%3A'%2C%20locale)%3B%0A%0A%20%20%2F*%20Abstract%20API%20*%2F%0A%20%20const%20phoneApiKey%20%3D%20'a5a0d4a3736e4c95aaf65400634b133e'%3B%0A%20%20const%20emailApiKey%20%3D%20'5d365c1aca2045e69255c90f918d208d'%3B%0A%0A%20%20%2F*%20Google%20Embed%20Maps%20API%20*%2F%0A%20%20const%20gMapsApiKey%20%3D%20'AIzaSyDfhWjUMu06AR0o7Tx2FsOxxFTToPz-GzA'%3B%0A%0A%20%20%2F*%20App%20API%20URLs%20*%2F%0A%20%20const%20apiStage%20%3D%20'https%3A%2F%2Fstage-code.closetworld.com%2Fapi'%3B%0A%20%20const%20apiLive%20%3D%20'https%3A%2F%2Fcode.closetworld.com%2Fapi'%3B%0A%0A%20%20%2F*%20URL%20Parameters%20*%2F%0A%20%20const%20urlParameters%20%3D%20%5B%0A%20%20%20%20'utm_source'%2C%0A%20%20%20%20'utm_medium'%2C%0A%20%20%20%20'utm_campaign'%2C%0A%20%20%20%20'utm_content'%2C%0A%20%20%20%20'utm_term'%2C%0A%20%20%20%20'match_type'%2C%0A%20%20%20%20'network'%2C%0A%20%20%20%20'device'%2C%0A%20%20%20%20'loc_physical'%2C%0A%20%20%20%20'creative'%2C%0A%20%20%20%20'gbraid'%2C%0A%20%20%20%20'wbraid'%2C%0A%20%20%20%20'gclid'%2C%0A%20%20%20%20'msclkid'%2C%0A%20%20%20%20'term'%2C%0A%20%20%20%20'id'%2C%0A%20%20%20%20'adset'%2C%0A%20%20%20%20'fbclid'%2C%0A%20%20%20%20'utm_id'%2C%0A%20%20%20%20'epik'%2C%0A%20%20%20%20'cto_pld'%2C%0A%20%20%20%20'cta'%0A%20%20%5D%3B%0A%0A%20%20%2F*%20States%20*%2F%0A%20%20const%20statesUS%20%3D%20%7B%22AL%22%3A%22Alabama%22%2C%22AK%22%3A%22Alaska%22%2C%22AS%22%3A%22American%20Samoa%22%2C%22AZ%22%3A%22Arizona%22%2C%22AR%22%3A%22Arkansas%22%2C%22CA%22%3A%22California%22%2C%22CO%22%3A%22Colorado%22%2C%22CT%22%3A%22Connecticut%22%2C%22DE%22%3A%22Delaware%22%2C%22DC%22%3A%22District%20of%20Columbia%22%2C%22FL%22%3A%22Florida%22%2C%22GA%22%3A%22Georgia%22%2C%22GU%22%3A%22Guam%22%2C%22HI%22%3A%22Hawaii%22%2C%22ID%22%3A%22Idaho%22%2C%22IL%22%3A%22Illinois%22%2C%22IN%22%3A%22Indiana%22%2C%22IA%22%3A%22Iowa%22%2C%22KS%22%3A%22Kansas%22%2C%22KY%22%3A%22Kentucky%22%2C%22LA%22%3A%22Louisiana%22%2C%22ME%22%3A%22Maine%22%2C%22MD%22%3A%22Maryland%22%2C%22MA%22%3A%22Massachusetts%22%2C%22MI%22%3A%22Michigan%22%2C%22MN%22%3A%22Minnesota%22%2C%22MS%22%3A%22Mississippi%22%2C%22MO%22%3A%22Missouri%22%2C%22MT%22%3A%22Montana%22%2C%22NE%22%3A%22Nebraska%22%2C%22NV%22%3A%22Nevada%22%2C%22NH%22%3A%22New%20Hampshire%22%2C%22NJ%22%3A%22New%20Jersey%22%2C%22NM%22%3A%22New%20Mexico%22%2C%22NY%22%3A%22New%20York%22%2C%22NC%22%3A%22North%20Carolina%22%2C%22ND%22%3A%22North%20Dakota%22%2C%22MP%22%3A%22Northern%20Mariana%20Islands%22%2C%22OH%22%3A%22Ohio%22%2C%22OK%22%3A%22Oklahoma%22%2C%22OR%22%3A%22Oregon%22%2C%22PA%22%3A%22Pennsylvania%22%2C%22PR%22%3A%22Puerto%20Rico%22%2C%22RI%22%3A%22Rhode%20Island%22%2C%22SC%22%3A%22South%20Carolina%22%2C%22SD%22%3A%22South%20Dakota%22%2C%22TN%22%3A%22Tennessee%22%2C%22TX%22%3A%22Texas%22%2C%22UT%22%3A%22Utah%22%2C%22VI%22%3A%22U.S.%20Virgin%20Islands%22%2C%22VT%22%3A%22Vermont%22%2C%22VA%22%3A%22Virginia%22%2C%22WA%22%3A%22Washington%22%2C%22WV%22%3A%22West%20Virginia%22%2C%22WI%22%3A%22Wisconsin%22%2C%22WY%22%3A%22Wyoming%22%2C%22AA%22%3A%22Armed%20Forces%20Americas%22%2C%22AE%22%3A%22Armed%20Forces%20Europe%22%2C%22AP%22%3A%22Armed%20Forces%20Pacific%22%7D%3B%0A%20%20const%20statesCA%20%3D%20%7B%22AB%22%3A%22Alberta%22%2C%22BC%22%3A%22British%20Columbia%22%2C%22MB%22%3A%22Manitoba%22%2C%22NB%22%3A%22New%20Brunswick%22%2C%22NL%22%3A%22Newfoundland%20and%20Labrador%22%2C%22NT%22%3A%22Northwest%20Territories%22%2C%22NS%22%3A%22Nova%20Scotia%22%2C%22NU%22%3A%22Nunavut%22%2C%22ON%22%3A%22Ontario%22%2C%22PE%22%3A%22Prince%20Edward%20Island%22%2C%22QC%22%3A%22Quebec%22%2C%22SK%22%3A%22Saskatchewan%22%2C%22YT%22%3A%22Yukon%20Territory%22%7D%3B%0A%0A%20%20%2F*%20Variables%20*%2F%0A%20%20var%20apiUrl%20%3D%20apiLive%3B%0A%20%20var%20dataZips%3B%0A%20%20var%20autocompleteEvent%20%3D%20false%3B%0A%20%20var%20formValidFields%20%3D%20%5B%5D%3B%0A%20%20const%20tabletResolution%20%3D%20window.matchMedia('(max-width%3A%20991px)')%3B%0A%20%20const%20usZipPattern%20%3D%20%2F%5E%5Cd%7B5%7D%24%2F%3B%0A%20%20const%20caZipPattern%20%3D%20%2F%5E%5BA-Za-z%5D%5Cd%5BA-Za-z%5D%20%3F%5Cd%5BA-Za-z%5D%5Cd%24%2F%3B%0A%0A%20%20%2F*%20URL%20parameter%20mappings%20to%20fields%20*%2F%0A%20%20const%20parameterMapping%20%3D%20%7B%0A%20%20%20%20email%3A%20%22Email%22%2C%0A%20%20%20%20phone%3A%20%22Phone-Number%22%2C%0A%20%20%20%20fname%3A%20%22First-Name%22%2C%0A%20%20%20%20lname%3A%20%22Last-Name%22%2C%0A%20%20%20%20address1%3A%20%22Address%22%2C%0A%20%20%20%20address2%3A%20%22Unit%22%2C%0A%20%20%20%20country%3A%20%22Country%22%2C%0A%20%20%20%20state%3A%20%22State%22%2C%0A%20%20%20%20city%3A%20%22City%22%2C%0A%20%20%20%20zip%3A%20%22ZIP-Code%22%2C%0A%20%20%20%20apptDate1%3A%20%22First-Choice-Date%22%2C%0A%20%20%20%20apptDate2%3A%20%22Second-Choice-Date%22%2C%0A%20%20%20%20apptTime1%3A%20%22First-Choice-Time%22%2C%0A%20%20%20%20apptTime2%3A%20%22Second-Choice-Time%22%2C%0A%20%20%20%20comments%3A%20%22Comments%22%2C%0A%20%20%20%20interests%3A%20%22%22%2C%0A%20%20%20%20step%3A%20%22%22%0A%20%20%7D%3B%0A%20%20const%20formSessionKey%20%3D%20%22schedule-request-data%22%3B%0A%20%20const%20step1SessionKey%20%3D%20%22schedule-step1-data%22%3B%0A%20%20const%20formSubmittedSessionKey%20%3D%20%22schedule-request-submitted%22%3B%0A%20%20const%20formPopupSessionKey%20%3D%20%22popup-guid%22%3B%0A%0A%20%20var%20d%20%3D%20new%20Date()%2C%0A%20%20%20%20%20%20weekday%20%3D%20d.getDay()%2C%0A%20%20%20%20%20%20defaultday%20%3D%203%2C%0A%20%20%20%20%20%20mindate%20%3D%202%2C%0A%20%20%20%20%20%20days%20%3D%202%3B%0A%20%20if%20(weekday%20%3D%3D%203%20%7C%7C%20weekday%20%3D%3D%204%20%7C%7C%20weekday%20%3D%3D%205%20%7C%7C%20weekday%20%3D%3D%206)%20%7B%0A%20%20%20%20mindate%20%3D%203%3B%0A%20%20%20%20days%20%3D%203%3B%0A%20%20%20%20defaultday%20%3D%204%3B%0A%20%20%7D%0A%0A%20%20var%20dateCalendarInstances%20%3D%20%7B%7D%3B%0A%0A%20%20if(window.location.hostname.includes(%22webflow.io%22))%7B%0A%20%20%20%20apiUrl%20%3D%20apiStage%3B%0A%20%20%7D%0A%0A%20%20var%20Webflow%20%3D%20Webflow%20%7C%7C%20%5B%5D%3B%0A%20%20Webflow.push(function()%7B%0A%20%20%20%20const%20telInputs%20%3D%20document.querySelectorAll(%22form%20.form__input--tel%22)%3B%0A%20%20%20%20telInputs.forEach(input%20%3D%3E%20%7B%0A%20%20%20%20%20%20window.intlTelInput(input%2C%20%7B%0A%20%20%20%20%20%20%20%20showFlags%3A%20false%2C%0A%20%20%20%20%20%20%20%20allowDropdown%3A%20false%2C%0A%20%20%20%20%20%20%20%20onlyCountries%3A%20%5B%22us%22%2C%20%22ca%22%5D%2C%0A%20%20%20%20%20%20%20%20preferredCountries%3A%20%5B%22us%22%2C%20%22ca%22%5D%2C%0A%20%20%20%20%20%20%20%20initialCountry%3A%20%22us%22%2C%0A%20%20%20%20%20%20%20%20countrySearch%3A%20false%2C%0A%20%20%20%20%20%20%20%20utilsScript%3A%20%22https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fintl-tel-input%4020.0.4%2Fbuild%2Fjs%2Futils.js%22%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D)%3B%0A%3C%2Fscript%3E"
      />
      <_Builtin.HtmlEmbed
        className="hidden-form-functions"
        value="%3Cscript%3E%0A%20%20%2F*%20Functions%20*%2F%0A%20%20function%20isSessionStorageSupported()%20%7B%0A%20%20%20%20try%20%7B%20return%20'sessionStorage'%20in%20window%20%26%26%20window.sessionStorage%20!%3D%3D%20null%3B%20%7D%0A%20%20%20%20catch%20(e)%20%7B%20return%20false%3B%20%7D%0A%20%20%7D%0A%0A%20%20if%20(isSessionStorageSupported())%20%7B%0A%20%20%20%20let%20landingSessionPar%20%3D%20%22landingUrl%22%0A%20%20%20%20let%20landingSession%20%3D%20sessionStorage.getItem(landingSessionPar)%3B%0A%20%20%20%20if%20(!landingSession)%20%7B%0A%20%20%20%20%20%20sessionStorage.setItem(landingSessionPar%2C%20window.location.href)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20validatePhoneNumber(phoneNumber)%20%7B%0A%20%20%20%20let%20apiUrl%20%3D%20%60https%3A%2F%2Fphonevalidation.abstractapi.com%2Fv1%2F%3Fapi_key%3D%24%7BphoneApiKey%7D%26phone%3D%24%7BphoneNumber%7D%60%3B%0A%0A%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%2F%2F%203s%20timeout%0A%20%20%20%20%20%20const%20timeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20console.warn('Phone%20validation%20request%20timed%20out.')%3B%0A%20%20%20%20%20%20%20%20resolve(true)%3B%20%2F%2F%20Allow%20the%20submission%20to%20proceed%20on%20timeout%0A%20%20%20%20%20%20%7D%2C%203000)%3B%0A%0A%20%20%20%20%20%20fetch(apiUrl)%0A%20%20%20%20%20%20%20%20.then(async%20response%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout(timeout)%3B%20%2F%2F%20Clear%20the%20timeout%20if%20the%20request%20completes%0A%20%20%20%20%20%20%20%20if%20(response.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20result%20%3D%20await%20response.json()%3B%0A%20%20%20%20%20%20%20%20%20%20return%20result.valid%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20console.warn(%60Phone%20validation%20failed%20with%20status%3A%20%24%7Bresponse.status%7D.%60)%3B%0A%20%20%20%20%20%20%20%20%20%20resolve(true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20.then(data%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20resolve(data)%3B%0A%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20.catch(error%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20In%20case%20of%20any%20error%2C%20allow%20the%20submission%0A%20%20%20%20%20%20%20%20clearTimeout(timeout)%3B%0A%20%20%20%20%20%20%20%20console.error('Error%20validating%20phone%20number%3A'%2C%20error)%3B%0A%20%20%20%20%20%20%20%20resolve(true)%3B%20%2F%2F%20Allow%20the%20submission%20on%20error%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20function%20validateEmail(email)%20%7B%0A%20%20%20%20let%20apiUrl%20%3D%20%60https%3A%2F%2Femailvalidation.abstractapi.com%2Fv1%2F%3Fapi_key%3D%24%7BemailApiKey%7D%26email%3D%24%7Bemail%7D%60%3B%0A%0A%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%2F%2F%203s%20timeout%0A%20%20%20%20%20%20const%20timeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20console.warn('Email%20validation%20request%20timed%20out.')%3B%0A%20%20%20%20%20%20%20%20resolve(true)%3B%20%2F%2F%20Allow%20the%20submission%20to%20proceed%20on%20timeout%0A%20%20%20%20%20%20%7D%2C%203000)%3B%0A%0A%20%20%20%20%20%20fetch(apiUrl)%0A%20%20%20%20%20%20%20%20.then(async%20response%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout(timeout)%3B%20%2F%2F%20Clear%20the%20timeout%20if%20the%20request%20completes%0A%20%20%20%20%20%20%20%20if%20(response.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20result%20%3D%20await%20response.json()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20isUndeliverable%20%3D%20result.deliverability%20%3D%3D%3D%20%22UNDELIVERABLE%22%3B%0A%20%20%20%20%20%20%20%20%20%20return%20!isUndeliverable%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20console.warn(%60Email%20validation%20failed%20with%20status%3A%20%24%7Bresponse.status%7D.%60)%3B%0A%20%20%20%20%20%20%20%20%20%20resolve(true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20.then(data%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20resolve(data)%3B%0A%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20.catch(error%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20In%20case%20of%20any%20error%2C%20allow%20the%20submission%0A%20%20%20%20%20%20%20%20clearTimeout(timeout)%3B%0A%20%20%20%20%20%20%20%20console.error('Error%20validating%20email%3A'%2C%20error)%3B%0A%20%20%20%20%20%20%20%20resolve(true)%3B%20%2F%2F%20Allow%20the%20submission%20on%20error%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20function%20getMCodeData()%20%7B%0A%20%20%20%20const%20storedString%20%3D%20localStorage.getItem('mCodeData')%3B%0A%20%20%20%20return%20storedString%20%3F%20JSON.parse(storedString)%20%3A%20null%3B%0A%20%20%7D%0A%0A%20%20%2F***%20Saves%20m_code%20plus%20a%20fresh%20timestamp%20to%20localStorage.*%2F%0A%20%20function%20setMCodeData(code)%20%7B%0A%20%20%20%20const%20data%20%3D%20%7B%0A%20%20%20%20%20%20m_code%3A%20code%2C%0A%20%20%20%20%20%20timestamp%3A%20Date.now()%0A%20%20%20%20%7D%3B%0A%20%20%20%20localStorage.setItem('mCodeData'%2C%20JSON.stringify(data))%3B%0A%20%20%7D%0A%0A%20%20%2F***%20Removes%20the%20stored%20marketing%20code%20object%20from%20localStorage.%20*%2F%0A%20%20function%20clearMCodeData()%20%7B%0A%20%20%20%20localStorage.removeItem('mCodeData')%3B%0A%20%20%7D%0A%0A%20%20%2F***%20Checks%20if%20the%20given%20timestamp%20is%20older%20than%20X%20days%20(default%2015).%20*%2F%0A%20%20function%20isExpired(oldTimestamp%2C%20days%20%3D%2015)%20%7B%0A%20%20%20%20const%20ms%20%3D%20days%20*%2024%20*%2060%20*%2060%20*%201000%3B%20%2F%2F%20days%20in%20ms%0A%20%20%20%20return%20(Date.now()%20-%20oldTimestamp)%20%3E%20ms%3B%0A%20%20%7D%0A%0A%20%20function%20trackPhoneClicks()%20%7B%0A%20%20%20%20%24('a%5Bhref%5E%3D%22tel%3A%22%5D').on('click'%2C%20function%20()%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20intellimize.sendEvent('phone_number_click')%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20console.log('intellimize%20phone%20error%3A'%2C%20e)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20console.log('send%20intellimize%20phone%20event')%3B%0A%20%20%20%20%20%20dataLayer.push(%7B%0A%20%20%20%20%20%20%20%20event%3A%20'phone_number_click'%2C%0A%20%20%20%20%20%20%20%20page_url%3A%20window.location.href%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20function%20replacePhoneLinks(oldPhone%2C%20newPhone)%20%7B%0A%20%20%20%20%2F%2F%20Select%20anchors%20that%20currently%20have%20href%3D%22tel%3AoldPhone%22%0A%20%20%20%20%24('a%5Bhref%3D%22tel%3A'%20%2B%20oldPhone%20%2B%20'%22%5D').each(function()%20%7B%0A%20%20%20%20%20%20%24(this).attr('href'%2C%20'tel%3A'%20%2B%20newPhone)%3B%0A%20%20%20%20%20%20%2F%2F%20Replace%20the%20old%20phone%20text%20anywhere%20inside%20the%20link%0A%20%20%20%20%20%20%2F%2F%20without%20removing%20surrounding%20elements%2Ficons%0A%20%20%20%20%20%20const%20linkHtml%20%3D%20%24(this).html()%3B%0A%20%20%20%20%20%20const%20updatedHtml%20%3D%20linkHtml.replaceAll(oldPhone%2C%20newPhone)%3B%0A%20%20%20%20%20%20%24(this).html(updatedHtml)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20function%20getUrlParam(key%2C%20urls)%20%7B%0A%20%20%20%20for%20(const%20url%20of%20urls)%20%7B%0A%20%20%20%20%20%20const%20urlObj%20%3D%20new%20URL(url)%3B%0A%20%20%20%20%20%20const%20urlParams%20%3D%20new%20URLSearchParams(urlObj.search)%3B%0A%20%20%20%20%20%20if%20(urlParams.has(key))%20%7B%0A%20%20%20%20%20%20%20%20return%20urlParams.get(key)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22%22%3B%0A%20%20%7D%0A%0A%20%20function%20fillHiddenFields(form)%20%7B%0A%20%20%20%20const%20urls%20%3D%20%5Bwindow.location.href%5D%3B%0A%20%20%20%20if%20(document.referrer)%20urls.push(document.referrer)%3B%0A%20%20%20%20const%20landingSession%20%3D%20sessionStorage.getItem(%22landingUrl%22)%3B%0A%20%20%20%20if%20(landingSession)%20urls.push(landingSession)%3B%0A%0A%20%20%20%20let%20storedData%20%3D%20getMCodeData()%3B%0A%20%20%20%20if%20(storedData)%20%7B%0A%20%20%20%20%20%20%2F%2F%20If%20it%E2%80%99s%20older%20than%2015%20days%2C%20remove%20it%0A%20%20%20%20%20%20if%20(isExpired(storedData.timestamp%2C%2015))%20%7B%0A%20%20%20%20%20%20%20%20clearMCodeData()%3B%0A%20%20%20%20%20%20%20%20storedData%20%3D%20null%3B%20%2F%2F%20treat%20as%20if%20nothing%20stored%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Read%20potential%20new%20code%20from%20URL%20(or%20fallback%20to%20other%20params)%0A%20%20%20%20let%20newMCode%20%3D%0A%20%20%20%20%20%20%20%20getUrlParam(%22m_code%22%2C%20urls)%20%7C%7C%0A%20%20%20%20%20%20%20%20(getUrlParam(%22gclid%22%2C%20urls)%20%26%26%20%22googleweb%22)%20%7C%7C%0A%20%20%20%20%20%20%20%20(getUrlParam(%22fbclid%22%2C%20urls)%20%26%26%20%22facebookweb%22)%20%7C%7C%0A%20%20%20%20%20%20%20%20(getUrlParam(%22msclkid%22%2C%20urls)%20%26%26%20%22msnweb%22)%20%7C%7C%0A%20%20%20%20%20%20%20%20%22%22%3B%0A%0A%20%20%20%20%2F%2F%20%20If%20we%20found%20a%20non-empty%20code%2C%20overwrite%20the%20localStorage%20data%0A%20%20%20%20if%20(newMCode)%20%7B%0A%20%20%20%20%20%20newMCode%20%3D%20newMCode.toUpperCase()%3B%0A%20%20%20%20%20%20setMCodeData(newMCode)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%2F%2F%20Otherwise%2C%20fall%20back%20to%20the%20stored%20code%20if%20it%20exists%0A%20%20%20%20%20%20newMCode%20%3D%20storedData%3F.m_code%20%7C%7C%20%22%22%3B%0A%20%20%20%20%20%20newMCode%20%3D%20newMCode.toUpperCase()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Populate%20the%20hidden%20Marketing-Code%20input%20with%20whatever%20code%20we%20ended%20up%20with%0A%20%20%20%20const%20mCodeInput%20%3D%20form.find('input%5Bname%3D%22Marketing-Code%22%5D')%3B%0A%20%20%20%20if%20(mCodeInput.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20mCodeInput.val(newMCode)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20a%20map%20of%20CMS%20codes%20-%3E%20phone%20numbers%0A%20%20%20%20const%20codePhoneMap%20%3D%20%7B%7D%3B%0A%20%20%20%20%24('.m_codes__item').each(function()%20%7B%0A%20%20%20%20%20%20const%20code%20%3D%20%24(this).find('.m_codes__item-value').text().trim().toUpperCase()%3B%0A%20%20%20%20%20%20let%20phone%20%3D%20%24(this).find('.m_codes__item-phone').text().trim()%3B%0A%20%20%20%20%20%20%2F%2F%20If%20phone%20doesn't%20start%20with%20%221-%22%2C%20prepend%20it%0A%20%20%20%20%20%20if%20(!phone.startsWith(%221-%22))%20%7B%0A%20%20%20%20%20%20%20%20phone%20%3D%20%221-%22%20%2B%20phone%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(code%20%26%26%20phone)%20%7B%0A%20%20%20%20%20%20%20%20codePhoneMap%5Bcode%5D%20%3D%20phone%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%2F%2F%20If%20our%20final%20code%20matches%20one%20from%20CMS%2C%20replace%20the%20default%20phone%0A%20%20%20%20%2F%2Fif%20(newMCode%20%26%26%20codePhoneMap%5BnewMCode%5D)%20%7B%0A%20%20%20%20%2F%2F%20%20replacePhoneLinks(%221-800-434-6018%22%2C%20codePhoneMap%5BnewMCode%5D)%3B%0A%20%20%20%20%2F%2F%7D%0A%0A%20%20%20%20const%20reqUrl%20%3D%20form.find('input%5Bname%3D%22Request-URL%22%5D')%3B%0A%20%20%20%20if%20(reqUrl.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20let%20url%20%3D%20new%20URL(window.location.href)%3B%0A%20%20%20%20%20%20let%20pathnameWithQuery%20%3D%20url.pathname%20%2B%20url.search%3B%0A%20%20%20%20%20%20reqUrl.val(pathnameWithQuery)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20refUrl%20%3D%20form.find('input%5Bname%3D%22HTTP-Referrer%22%5D')%3B%0A%20%20%20%20if%20(refUrl.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20refUrl.val(document.referrer)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20landUrl%20%3D%20form.find('input%5Bname%3D%22Landing-URL%22%5D')%3B%0A%20%20%20%20if%20(landUrl.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20landUrl.val(landingSession%20%7C%7C%20window.location.href)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20domainUrl%20%3D%20form.find('input%5Bname%3D%22Domain-Name%22%5D')%3B%0A%20%20%20%20if%20(domainUrl.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20domainUrl.val(window.location.hostname)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20clientIp%20%3D%20form.find('input%5Bname%3D%22Client-IP%22%5D')%3B%0A%20%20%20%20if%20(clientIp.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%24.getJSON(%22https%3A%2F%2Fapi.ipify.org%3Fformat%3Djsonp%26callback%3D%3F%22%2C%20function%20(json)%20%7B%0A%20%20%20%20%20%20%20%20clientIp.val(json.ip)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20siteLocale%20%3D%20%24('html').data('wf-locale')%3B%0A%20%20%20%20const%20languageId%20%3D%20form.find('input%5Bname%3D%22Language-ID%22%5D')%3B%0A%20%20%20%20if%20(languageId.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20languageId.val(siteLocale)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20for%20(const%20key%20of%20urlParameters)%20%7B%0A%20%20%20%20%20%20const%20paramValue%20%3D%20getUrlParam(key%2C%20urls)%3B%0A%20%20%20%20%20%20if%20(paramValue)%20%7B%0A%20%20%20%20%20%20%20%20const%20paramInput%20%3D%20form.find(%60input%5Bname%3D%22Parameter-%24%7Bkey%7D%22%5D%60)%3B%0A%20%20%20%20%20%20%20%20if%20(paramInput.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20paramInput.val(paramValue)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20generateOptions(field%2C%20options)%20%7B%0A%20%20%20%20field%5B0%5D.innerHTML%20%3D%20''%3B%0A%0A%20%20%20%20var%20fragment%20%3D%20document.createDocumentFragment()%3B%0A%20%20%20%20let%20initialOption%20%3D%20document.createElement(%22option%22)%3B%0A%20%20%20%20initialOption.value%20%3D%20%22%22%3B%0A%20%20%20%20initialOption.text%20%3D%20%22State%22%3B%0A%20%20%20%20fragment.appendChild(initialOption)%3B%0A%0A%20%20%20%20for%20(var%20key%20in%20options)%20%7B%0A%20%20%20%20%20%20let%20option%20%3D%20document.createElement(%22option%22)%3B%0A%20%20%20%20%20%20option.value%20%3D%20key%3B%0A%20%20%20%20%20%20option.text%20%3D%20options%5Bkey%5D%3B%0A%20%20%20%20%20%20fragment.appendChild(option)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20field%5B0%5D.appendChild(fragment)%3B%0A%20%20%7D%0A%0A%20%20function%20changeCountry(form%2C%20country)%7B%0A%20%20%20%20%2F%2Fconsole.log(%22State%20Change%20Event%22)%3B%0A%20%20%20%20let%20stateField%20%3D%20form.find('%5Bname%3D%22State%22%5D')%3B%0A%20%20%20%20let%20zip%20%3D%20form.find(%22%5Bname%3D'ZIP-Code'%5D%22)%3B%0A%20%20%20%20let%20zipLength%20%3D%207%3B%0A%20%20%20%20if(country%20%3D%3D%20%22US%22)%20%7B%0A%20%20%20%20%20%20generateOptions(stateField%2C%20statesUS)%3B%0A%20%20%20%20%7D%20else%20if%20(country%20%3D%3D%20%22CA%22)%20%7B%0A%20%20%20%20%20%20generateOptions(stateField%2C%20statesCA)%3B%0A%20%20%20%20%20%20%2F%2FzipLength%20%3D%207%3B%0A%20%20%20%20%7D%0A%20%20%20%20if(zip.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%2F%2Fzip.val(%22%22)%3B%0A%20%20%20%20%20%20%2F%2Fzip.attr('maxlength'%2C%20zipLength)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20Function%20to%20normalize%20country%20values%0A%20%20function%20normalizeCountryValue(value)%20%7B%0A%20%20%20%20const%20countryMappings%20%3D%20%7B%0A%20%20%20%20%20%20%22united%20states%22%3A%20%22US%22%2C%0A%20%20%20%20%20%20%22us%22%3A%20%22US%22%2C%0A%20%20%20%20%20%20%22canada%22%3A%20%22CA%22%2C%0A%20%20%20%20%20%20%22ca%22%3A%20%22CA%22%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Convert%20to%20lowercase%20and%20match%20against%20mappings%0A%20%20%20%20return%20countryMappings%5Bvalue.toLowerCase()%5D%20%7C%7C%20value%3B%0A%20%20%7D%0A%0A%20%20function%20regexEmail(email)%20%7B%0A%20%20%20%20var%20re%20%3D%20%2F%5CS%2B%40%5CS%2B%5C.%5CS%2B%2F%3B%0A%20%20%20%20return%20re.test(email)%3B%0A%20%20%7D%0A%0A%20%20async%20function%20stringToGuidHash(inputString)%20%7B%0A%20%20%20%20%2F%2FConvert%20string%20to%20Uint8Array%0A%20%20%20%20const%20encoder%20%3D%20new%20TextEncoder()%3B%0A%20%20%20%20const%20data%20%3D%20encoder.encode(inputString)%3B%0A%20%20%20%20%2F%2FHash%20data%20using%20SHA-256%0A%20%20%20%20const%20hashBuffer%20%3D%20await%20window.crypto.subtle.digest('SHA-256'%2C%20data)%3B%0A%20%20%20%20const%20hashArray%20%3D%20Array.from(new%20Uint8Array(hashBuffer))%3B%0A%20%20%20%20%2F%2FConvert%20hash%20to%20hex%20string%0A%20%20%20%20const%20hashHex%20%3D%20hashArray.map(b%20%3D%3E%20b.toString(16).padStart(2%2C%20'0')).join('')%3B%0A%20%20%20%20%2F%2FFormat%20string%20as%20GUID%0A%20%20%20%20return%20hashHex.substring(0%2C%208)%20%2B%20'-'%20%2B%20hashHex.substring(8%2C%2012)%20%2B%20'-4'%20%2B%20hashHex.substring(13%2C%2016)%20%2B%20'-8'%20%2B%20hashHex.substring(17%2C%2020)%20%2B%20'-'%20%2B%20hashHex.substring(20%2C%2032)%3B%0A%20%20%7D%0A%0A%20%20async%20function%20isFieldValid(field%2C%20multiStep%20%3D%20false)%20%7B%0A%20%20%20%20let%20isValid%20%3D%20true%2C%0A%20%20%20%20%20%20%20%20msg%20%3D%20%22This%20field%20is%20required.%22%2C%0A%20%20%20%20%20%20%20%20formId%20%3D%20field.closest(%22form%22).attr(%22id%22)%2C%0A%20%20%20%20%20%20%20%20stepId%20%3D%20null%3B%0A%0A%20%20%20%20if%20(multiStep)%20%7B%0A%20%20%20%20%20%20stepId%20%3D%20field.closest(%22.form-steps__single%22).attr(%22id%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(%24.trim(field.val())%20%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20if%20(multiStep)%20%7B%0A%20%20%20%20%20%20%20%20formValidFields%5BformId%5D%5BstepId%5D%5Bfield.attr(%22name%22)%5D%20%3D%20%5Bfalse%2C%20msg%5D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20formValidFields%5BformId%5D%5Bfield.attr(%22name%22)%5D%20%3D%20%5Bfalse%2C%20msg%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%5Bfalse%2C%20msg%5D%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20if%20(field.hasClass(%22form__input--tel%22))%20%7B%0A%20%20%20%20%20%20%20%20let%20itIn%20%3D%20window.intlTelInputGlobals.getInstance(field%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20isValid%20%3D%20itIn.isValidNumber()%3B%0A%20%20%20%20%20%20%20%20if%20(!isValid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20msg%20%3D%20%22Invalid%20phone%20number.%22%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20phoneNumber%20%3D%20itIn.getNumber()%3B%0A%20%20%20%20%20%20%20%20%20%20isValid%20%3D%20await%20validatePhoneNumber(phoneNumber)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!isValid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20msg%20%3D%20%22Invalid%20phone%20number.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2Felse%20%7B%0A%20%20%20%20%20%20%20%20%20%20field.closest(%22.form__group%22).find(%22%5Bname%3D'Formatted-Phone-Number'%5D%22).val(phoneNumber)%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20(field.hasClass(%22form__input--zip%22))%20%7B%0A%20%20%20%20%20%20%20%20let%20val%20%3D%20field.val()%3B%0A%20%20%20%20%20%20%20%20let%20countryField%20%3D%20field.closest(%22form%22).find(%22%5Bname%3D'Country'%5D%22)%3B%0A%20%20%20%20%20%20%20%20if(countryField.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20country%20%3D%20countryField.val()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(country%20%3D%3D%20%22US%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20isValid%20%3D%20usZipPattern.test(val)%20%7C%7C%20caZipPattern.test(val)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isValid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20msg%20%3D%20%22Invalid%20ZIP%20code.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(country%20%3D%3D%20%22CA%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20isValid%20%3D%20usZipPattern.test(val)%20%7C%7C%20caZipPattern.test(val)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isValid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20msg%20%3D%20%22Invalid%20ZIP%20code.%20Please%20use%20Canadian%20format%20A9A%209A9%2C%20where%20A%20is%20a%20letter%20and%209%20is%20a%20digit.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20isValid%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20isValid%20%3D%20usZipPattern.test(val)%20%7C%7C%20caZipPattern.test(val)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!isValid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20msg%20%3D%20%22Invalid%20ZIP%20code.%20Please%20use%205%20digits%20format%20for%20USA%20or%20A9A%209A9%20format%20for%20Canada.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20(field.hasClass(%22form__input--email%22))%20%7B%0A%20%20%20%20%20%20%20%20let%20val%20%3D%20field.val()%3B%0A%20%20%20%20%20%20%20%20if%20(regexEmail(val))%20%7B%0A%20%20%20%20%20%20%20%20%20%20isValid%20%3D%20await%20validateEmail(val)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!isValid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fif%20(res.is_valid_format.value%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20msg%20%3D%20%22Invalid%20e-mail%20address.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20isValid%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20msg%20%3D%20%22Invalid%20e-mail%20address%20format.%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20(field.is('select')%20%26%26%20field.find(%22%3Aselected%22).val()%20%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20isValid%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%20else%20if(field.hasClass(%22form__radiobutton-input%22))%20%7B%0A%20%20%20%20%20%20%20%20console.log('is%20radiobutton')%3B%0A%20%20%20%20%20%20%20%20let%20groupName%20%3D%20field.attr(%22name%22)%3B%0A%20%20%20%20%20%20%20%20let%20isChecked%20%3D%20field.closest(%22form%22).find(%60input%5Bname%3D%22%24%7BgroupName%7D%22%5D%3Achecked%60).length%20%3E%200%3B%0A%20%20%20%20%20%20%20%20if%20(!isChecked)%20%7B%0A%20%20%20%20%20%20%20%20%20%20isValid%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20msg%20%3D%20%22Please%20select%20an%20option.%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if(field.hasClass(%22form__checkbox-input%22)%20%26%26%20!field.hasClass(%22is--consent%22)%20%26%26%20field.closest(%22form%22).hasClass(%22form-checkbox-validation%22))%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Interests%20Checkbox%20Validation%20only%20for%20.form-checkbox-validation%20class%0A%20%20%20%20%20%20%20%20console.log('is%20checkbox')%3B%0A%20%20%20%20%20%20%20%20let%20groupParent%20%3D%20field.closest(%22.form__checkbox-group%22)%3B%0A%20%20%20%20%20%20%20%20let%20isChecked%20%3D%20groupParent.find('input.form__checkbox-input%3Achecked').length%20%3E%200%3B%0A%20%20%20%20%20%20%20%20let%20groupId%20%3D%20%22Interests-Group%22%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!isChecked)%20%7B%0A%20%20%20%20%20%20%20%20%20%20isValid%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20msg%20%3D%20%22Please%20select%20an%20option.%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Update%20formValidFields%20for%20checkbox%20group%20%0A%20%20%20%20%20%20%20%20if%20(multiStep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20formValidFields%5BformId%5D%5BstepId%5D%5BgroupId%5D%20%3D%20%5BisValid%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20formValidFields%5BformId%5D%5BgroupId%5D%20%3D%20%5BisValid%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20console.log(formValidFields%5BformId%5D%5BgroupId%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20early%20for%20checkbox%20group%20to%20avoid%20conflict%20with%20individual%20checkbox%20names%0A%20%20%20%20%20%20%20%20return%20%5BisValid%2C%20msg%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20(multiStep)%20%7B%0A%20%20%20%20%20%20formValidFields%5BformId%5D%5BstepId%5D%5Bfield.attr(%22name%22)%5D%20%3D%20%5BisValid%2C%20msg%5D%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20formValidFields%5BformId%5D%5Bfield.attr(%22name%22)%5D%20%3D%20%5BisValid%2C%20msg%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2Fconsole.log(isValid%2C%20'not%20valid%20here%3F')%3B%0A%20%20%20%20return%20%5BisValid%2C%20msg%5D%3B%0A%20%20%7D%0A%0A%20%20function%20formValidation(form%2C%20visualUpdate)%20%7B%0A%20%20%20%20let%20isValid%20%3D%20true%3B%0A%20%20%20%20let%20arr%20%3D%20formValidFields%5Bform.attr(%22id%22)%5D%3B%0A%20%20%20%20%2F%2Fconsole.log(arr)%3B%0A%20%20%20%20for%20(var%20key%20in%20arr)%20%7B%0A%20%20%20%20%20%20if%20(!arr%5Bkey%5D%5B0%5D)%20%7B%0A%20%20%20%20%20%20%20%20let%20group%20%3D%20form.find('%5Bname%3D%22'%20%2B%20key%20%2B%20'%22').closest(%22.form__group%22)%3B%0A%20%20%20%20%20%20%20%20if%20(visualUpdate)%20%7B%0A%20%20%20%20%20%20%20%20%20%20group.find(%22.form__validation-msg%22).text(arr%5Bkey%5D%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20group.addClass(%22is--val-error%22)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Interests%20Checkbox%20Validation%20only%20for%20.form-checkbox-validation%20class%0A%20%20%20%20%20%20%20%20%20%20if(key%20%3D%3D%20'Interests-Group'%20%26%26%20form.hasClass(%22form-checkbox-validation%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20interestsGroup%20%3D%20form.find('.form__checkbox-group').closest(%22.form__group%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20interestsGroup.find(%22.form__validation-msg%22).text(arr%5Bkey%5D%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20interestsGroup.addClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20isValid%20%3D%20arr%5Bkey%5D%5B0%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2Fconsole.log(isValid%2C%20'not%20valid%20here%3F%202')%3B%0A%20%20%20%20return%20isValid%3B%0A%20%20%7D%0A%0A%20%20function%20stepErrorCheck(form%2C%20step)%20%7B%0A%20%20%20%20let%20isValid%20%3D%20true%3B%0A%20%20%20%20let%20arr%20%3D%20formValidFields%5Bform.attr(%22id%22)%5D%5Bstep.attr(%22id%22)%5D%3B%0A%20%20%20%20for%20(var%20key%20in%20arr)%20%7B%0A%20%20%20%20%20%20if%20(!arr%5Bkey%5D%5B0%5D)%20%7B%0A%20%20%20%20%20%20%20%20isValid%20%3D%20arr%5Bkey%5D%5B0%5D%3B%0A%20%20%20%20%20%20%7D%20%0A%20%20%20%20%7D%0A%20%20%20%20let%20stepSubmitWrap%20%3D%20step.find('.form__submit.is--val-error')%3B%0A%20%20%20%20if(isValid)%20%7B%0A%20%20%20%20%20%20stepSubmitWrap.removeClass('is--val-error')%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20stepValidation(form%2C%20step)%20%7B%0A%20%20%20%20let%20isValid%20%3D%20true%3B%0A%20%20%20%20let%20arr%20%3D%20formValidFields%5Bform.attr(%22id%22)%5D%5Bstep.attr(%22id%22)%5D%3B%0A%20%20%20%20const%20errorDetails%20%3D%20%5B%5D%3B%0A%20%20%20%20%2F%2Fconsole.log(arr)%3B%0A%20%20%20%20for%20(var%20key%20in%20arr)%20%7B%0A%20%20%20%20%20%20if%20(!arr%5Bkey%5D%5B0%5D)%20%7B%0A%20%20%20%20%20%20%20%20let%20group%20%3D%20form.find('%5Bname%3D%22'%20%2B%20key%20%2B%20'%22').closest(%22.form__group%22)%3B%0A%20%20%20%20%20%20%20%20group.find(%22.form__validation-msg%22).text(arr%5Bkey%5D%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20group.addClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20Interests%20Checkbox%20Validation%20only%20for%20.form-checkbox-validation%20class%0A%20%20%20%20%20%20%20%20if(key%20%3D%3D%20'Interests-Group'%20%26%26%20form.hasClass(%22form-checkbox-validation%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20interestsGroup%20%3D%20form.find('.form__checkbox-group').closest(%22.form__group%22)%3B%0A%20%20%20%20%20%20%20%20%20%20interestsGroup.find(%22.form__validation-msg%22).text(arr%5Bkey%5D%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20interestsGroup.addClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20add%20to%20errorDetails%20array%0A%20%20%20%20%20%20%20%20errorDetails.push(%7B%0A%20%20%20%20%20%20%20%20%20%20field_name%3A%20key%2C%0A%20%20%20%20%20%20%20%20%20%20error_msg%3A%20%20arr%5Bkey%5D%5B1%5D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20isValid%20%3D%20arr%5Bkey%5D%5B0%5D%3B%0A%20%20%20%20%20%20%7D%20%0A%20%20%20%20%7D%0A%0A%20%20%20%20console.log('error%20to%20push%3A'%2C%20form.attr('id')%2C%20step.attr('id')%2C%20errorDetails)%3B%0A%0A%20%20%20%20%2F%2F%20push%20ONE%20form_error%20event%20if%20any%20field%20failed%0A%20%20%20%20if%20(!isValid%20%26%26%20errorDetails.length)%20%7B%0A%20%20%20%20%20%20window.dataLayer%20%3D%20window.dataLayer%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20dataLayer.push(%7B%0A%20%20%20%20%20%20%20%20event%3A%20%20%20'form_error'%2C%0A%20%20%20%20%20%20%20%20form_id%3A%20form.attr('id')%2C%0A%20%20%20%20%20%20%20%20step_id%3A%20step.attr('id')%2C%0A%20%20%20%20%20%20%20%20errors%3A%20%20errorDetails%20%20%20%20%20%20%20%20%20%20%2F%2F%20array%20of%20all%20failing%20fields%2Fmessages%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20isValid%3B%0A%20%20%7D%0A%0A%20%20async%20function%20fieldValidation(field%2C%20multiStep%20%3D%20false)%20%7B%0A%20%20%20%20%2F%2Fconsole.log('field%3A'%2C%20field)%3B%0A%20%20%20%20if%20(%0A%20%20%20%20%20%20field.prop('required')%20%7C%7C%0A%20%20%20%20%20%20(field.hasClass(%22form__radiobutton-input%22)%20%26%26%20!field.hasClass(%22is--consent%22))%20%7C%7C%0A%20%20%20%20%20%20(field.hasClass(%22form__checkbox-input%22)%20%26%26%20!field.hasClass(%22is--consent%22)%20%26%26%20field.closest(%22form%22).hasClass(%22form-checkbox-validation%22))%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20let%20validation%20%3D%20await%20isFieldValid(field%2C%20multiStep)%3B%0A%20%20%20%20%20%20let%20isValid%20%3D%20validation%5B0%5D%3B%0A%20%20%20%20%20%20let%20msg%20%3D%20validation%5B1%5D%3B%0A%20%20%20%20%20%20if%20(!isValid)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2Fconsole.log('error%20here'%2C%20field)%3B%0A%20%20%20%20%20%20%20%20field.closest(%22.form__group%22).find(%22.form__validation-msg%22).text(msg)%3B%0A%20%20%20%20%20%20%20%20field.closest(%22.form__group%22).addClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%20%20field.closest(%22.w-form%22).find(%22.form-trigger%22).addClass(%22disabled%22)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20field.closest(%22.form__group%22).removeClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%20%20field.closest(%22.w-form%22).find(%22.form-trigger%22).removeClass(%22disabled%22)%3B%0A%20%20%20%20%20%20%20%20%2F%2Fconsole.log('valid%20here'%2C%20field)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if(!multiStep)%20%7B%0A%20%20%20%20%20%20%20%20let%20valid%20%3D%20formValidation(field.closest(%22form%22)%2C%20false)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20checkStepValid(form%2C%20step)%20%7B%0A%20%20%20%20let%20fields%20%3D%20formValidFields%5Bform.attr(%22id%22)%5D%5Bstep.attr(%22id%22)%5D%3B%0A%20%20%20%20let%20valid%20%3D%20false%3B%0A%0A%20%20%20%20Object.keys(fields).forEach(key%20%3D%3E%20%7B%0A%20%20%20%20%20%20if(key%20!%3D%3D%20%22Country%22)%20%7B%0A%20%20%20%20%20%20%20%20if(form.find(%22%5Bname%3D'%22%2B%20key%20%2B%22'%5D%22).val()%20!%3D%3D%20%22%22)%20valid%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20return%20valid%3B%0A%20%20%7D%0A%0A%20%20function%20progressForm(form%2C%20step%2C%20next%20%3D%20true%2C%20last%20%3D%20false%2C%20scrollTo%20%3D%20false)%20%7B%0A%0A%20%20%20%20let%20el%20%3D%20step.prev()%3B%0A%20%20%20%20if(next)%20el%20%3D%20step.next()%3B%0A%20%20%20%20%2F%2Fconsole.log('test%20step%20here'%2C%20step%2C%20el)%3B%0A%20%20%20%20if(!last)%20%7B%0A%20%20%20%20%20%20form.find(%22.form-steps__single.active%22).removeClass(%22active%22)%3B%0A%20%20%20%20%20%20el.addClass(%22active%22)%3B%0A%20%20%20%20%20%20if%20(scrollTo%20%26%26%20tabletResolution.matches)%20%7B%0A%20%20%20%20%20%20%20%20%24('html%2C%20body').animate(%7B%20scrollTop%3A%20form.find(%22.link-holder%22).offset().top%20%7D%2C%20600)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20adjustProgress(form%2C%20el%2C%20last)%3B%0A%20%20%7D%0A%0A%20%20function%20adjustProgress(form%2C%20step%2C%20last%2C%20inputCheck%20%3D%20false)%20%7B%0A%20%20%20%20let%20stepId%20%3D%20step.attr(%22id%22)%20!%3D%3D%20undefined%20%3F%20parseInt(step.attr(%22id%22).slice(-1))%20%3A%202%3B%0A%20%20%20%20%2F%2Fconsole.log('step%20id'%2C%20step.attr(%22id%22))%3B%0A%20%20%20%20let%20prg%20%3D%20(stepId%20%2B%201)%20*%2020%3B%0A%0A%20%20%20%20if(inputCheck)%20%7B%0A%20%20%20%20%20%20let%20valid%20%3D%20checkStepValid(form%2C%20step)%3B%0A%0A%20%20%20%20%20%20prg%20%3D%200%3B%0A%20%20%20%20%20%20if(valid)%20%7B%0A%20%20%20%20%20%20%20%20prg%20%3D%2020%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2Fconsole.log(%22Valid%3A%20%22%20%2B%20valid%20%2B%20%22%2C%20Step%3A%20%22%20%2B%20stepId%20%2B%20%22%2C%20Progress%3A%20%22%20%2B%20prg)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if(last)%20%7B%0A%20%20%20%20%20%20prg%20%3D%20100%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20let%20bar%20%3D%20%24(%22.form-steps__progress-bar%22)%3B%0A%20%20%20%20bar.data(%22value%22%2C%20prg)%3B%0A%20%20%20%20bar.css(%22width%22%2C%20prg%20%2B%20%22%25%22)%3B%0A%20%20%7D%0A%0A%20%20function%20fillFormViaURLorSession(form)%20%7B%0A%20%20%20%20for%20(const%20%5BparamKey%2C%20fieldName%5D%20of%20Object.entries(parameterMapping))%20%7B%0A%20%20%20%20%20%20let%20fieldValue%20%3D%20getUrlParam(paramKey%2C%20%5Bwindow.location.href%5D)%3B%0A%20%20%20%20%20%20%2F%2Fconsole.log(%60%24%7BparamKey%7D%3A%20%24%7BfieldName%7D%60%2C%20fieldValue)%3B%0A%20%20%20%20%20%20if%20(fieldValue%20%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20let%20sessionData%20%3D%20getFormSession(formSessionKey)%3B%0A%20%20%20%20%20%20%20%20if%20(sessionData%5BparamKey%5D%20!%3D%3D%20undefined%20%26%26%20sessionData%5BparamKey%5D%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20fieldValue%20%3D%20sessionData%5BparamKey%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(fieldValue%20!%3D%20%22%22%20%26%26%20fieldName%20!%3D%20%22%22%20%26%26%20form.find(%60%5Bname%3D%22%24%7BfieldName%7D%22%5D%60).length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20if%20(paramKey%20%3D%3D%20%22country%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20normalizedValue%20%3D%20normalizeCountryValue(fieldValue)%3B%0A%20%20%20%20%20%20%20%20%20%20form.find(%60%5Bname%3D%22%24%7BfieldName%7D%22%5D%60).val(normalizedValue).change()%3B%0A%20%20%20%20%20%20%20%20%20%20changeCountry(form%2C%20normalizedValue)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(paramKey%20%3D%3D%20%22apptDate1%22%20%7C%7C%20paramKey%20%3D%3D%20%22apptDate2%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20date%20%3D%20fieldValue.replace(%2F-%2Fg%2C%20%22%2F%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fform.find(%60%5Bname%3D%22%24%7BfieldName%7D%22%5D%60).datepicker(%22setDate%22%2C%20date)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20formName%20%3D%20form.attr('name')%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(dateCalendarInstances%5BformName%5D.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20dateCalendarInstances%5BformName%5D.forEach((calendar)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(calendar.props.name%20%3D%3D%20fieldName.replace(%2F-%2Fg%2C%20%22%20%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20calendar.setVal(date)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20fieldValue%20%3D%20date%3B%20%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20set%20DayName%20in%20multi-step%20new%20time%20appointment%20flow%0A%20%20%20%20%20%20%20%20%20%20let%20dateParts%20%3D%20date.split('%2F')%3B%0A%20%20%20%20%20%20%20%20%20%20let%20newDateObject%20%3D%20new%20Date(dateParts%5B2%5D%2C%20dateParts%5B0%5D%20-%201%2C%20dateParts%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20dayName%20%3D%20newDateObject.toLocaleDateString(locale%2C%20%7B%20weekday%3A%20'long'%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Convert%20year%20to%202%20digits%0A%20%20%20%20%20%20%20%20%20%20dateParts%5B2%5D%20%3D%20dateParts%5B2%5D.slice(-2)%3B%20%2F%2F%20Extract%20last%20two%20digits%20of%20the%20year%0A%20%20%20%20%20%20%20%20%20%20let%20formattedDate%20%3D%20%60%24%7BdateParts%5B0%5D%7D%2F%24%7BdateParts%5B1%5D%7D%2F%24%7BdateParts%5B2%5D%7D%60%3B%0A%0A%20%20%20%20%20%20%20%20%20%20form.find('span%5Bdata-date-appt1%5D%2C%20span%5Bdata-date-appt2%5D').each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20span%20%3D%20%24(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20dataAttr%20%3D%20span.attr('data-date-appt1')%20%3F%20'data-date-appt1'%20%3A%20'data-date-appt2'%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(dataAttr%20%3D%3D%3D%20'data-date-appt1'%20%26%26%20paramKey%20%3D%3D%20%22apptDate1%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20span.text(%60%24%7BdayName%7D%2C%20%24%7BformattedDate%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(dataAttr%20%3D%3D%3D%20'data-date-appt2'%20%26%26%20paramKey%20%3D%3D%20%22apptDate2%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20span.text(%60%24%7BdayName%7D%2C%20%24%7BformattedDate%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(paramKey%20%3D%3D%20%22apptTime1%22%20%7C%7C%20paramKey%20%3D%3D%20%22apptTime2%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(fieldValue%20%3D%3D%20%22O%22%20%7C%7C%20fieldValue%20%3D%3D%20%221%22%20%7C%7C%20fieldValue%20%3D%3D%20%224%22%20%7C%7C%20fieldValue%20%3D%3D%20%2210%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20insertVal%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(fieldValue%20%3D%3D%20%22O%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertVal%20%3D%20%22Other%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(fieldValue%20%3D%3D%20%221%22%20%7C%7C%20fieldValue%20%3D%3D%20%224%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertVal%20%3D%20fieldValue%20%2B%20%22%3A00%20pm%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(fieldValue%20%3D%3D%20%2210%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertVal%20%3D%20fieldValue%20%2B%20%22%3A00%20am%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(insertVal%20!%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fieldValue%20%3D%20insertVal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20console.log('is%20here%202'%2C%20fieldValue%2C%20fieldName)%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20check%20if%20it's%20radiobutton%20or%20select%0A%20%20%20%20%20%20%20%20%20%20let%20fieldElement%20%3D%20form.find(%60%5Bname%3D%22%24%7BfieldName%7D%22%5D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20if(fieldElement.is('%3Aradio'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fieldElement.filter(%60%5Bvalue%3D%22%24%7BfieldValue%7D%22%5D%60).closest('.form__radiobutton-wrap%3Anot(.form__radiobutton-wrap__other)').addClass('is--active').removeClass('hidden')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fieldElement.filter(%60%5Bvalue%3D%22%24%7BfieldValue%7D%22%5D%60).prop('checked'%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20check%20if%20value%20is%20from%20initially%20visible%20-%2010%3A00%20am%2C%201%3A00%20pm%2C%204%3A00%20pm%0A%20%20%20%20%20%20%20%20%20%20%20%20if(fieldValue%20%3D%3D%20'10%3A00%3A00'%20%7C%7C%20fieldValue%20%3D%3D%20'13%3A00%3A00'%20%7C%7C%20fieldValue%20%3D%3D%20'16%3A00%3A00')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20in%20this%20case%20we%20simply%20change%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fieldElement.val(fieldValue).change()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20not%20%3D%3E%20we%20select%20Other%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fieldElement.val('Other').change()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fieldValue%20%3D%20'Other'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20set%20Time%20in%20multi-step%20new%20time%20appointment%20flow%0A%20%20%20%20%20%20%20%20%20%20form.find('span%5Bdata-time-appt1%5D%2C%20span%5Bdata-time-appt2%5D').each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20span%20%3D%20%24(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20dataAttr%20%3D%20span.attr('data-time-appt1')%20%3F%20'data-time-appt1'%20%3A%20'data-time-appt2'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20formattedTimeValue%20%3D%20fieldValue%20%3D%3D%20'Other'%20%3F%20fieldValue%20%3A%20formatTimeTo12Hour(fieldValue)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(dataAttr%20%3D%3D%3D%20'data-time-appt1'%20%26%26%20paramKey%20%3D%3D%20%22apptTime1%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20span.text(%60%2C%20%24%7BformattedTimeValue%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20span.removeClass('hidden')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(dataAttr%20%3D%3D%3D%20'data-time-appt2'%20%26%26%20paramKey%20%3D%3D%20%22apptTime2%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20span.text(%60%2C%20%24%7BformattedTimeValue%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20span.removeClass('hidden')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(paramKey%20%3D%3D%20%22zip%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20form.find(%60%5Bname%3D%22%24%7BfieldName%7D%22%5D%60).val(fieldValue).change()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20form.find(%60%5Bname%3D%22%24%7BfieldName%7D%22%5D%60).val(fieldValue)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20updateFormSession(formSessionKey%2C%20paramKey%2C%20fieldValue)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(fieldName%20%3D%3D%20%22%22%20%26%26%20fieldValue%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20if%20(paramKey%20%3D%3D%20%22interests%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20interestsNames%20%3D%20fieldValue.split(%22%2C%22)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20selectedInterestsArr%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20interestsNames.forEach((interestName)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(form.find(%60%5Bname%3D%22%24%7BinterestName%7D%22%5D%60).length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find(%60%5Bname%3D%22%24%7BinterestName%7D%22%5D%60).prop(%22checked%22%2C%20%22true%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(form.hasClass(%22form-multi-steps%22)%20%7C%7C%20form.hasClass(%22form-lp%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find(%60%5Bname%3D%22%24%7BinterestName%7D%22%5D%60).closest(%22.form__checkbox%22).addClass(%22is--active%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20valueString%20%3D%20form.find(%60%5Bname%3D%22%24%7BinterestName%7D%22%5D%60).attr('name')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Remove%20%22Interests-%22%20and%20also%20replace%20%22-%22%20with%20%22%20%22%20ex.%20Sliding-Door%2C%20Home-Office%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20value%20%3D%20valueString.replace(%22Interests-%22%2C%20%22%22).replace(%2F-%2Fg%2C%20%22%20%22)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(interestName%20%3D%3D%20'Interests-Other')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find('.form__interests-other-text').removeClass('hidden')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20selectedInterestsArr.push(value)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20let%20label%20%3D%20form.find('input%5Bname%3D%22Interests-Label%22%5D')%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(label.length%20%3E%200%20%26%26%20selectedInterestsArr.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20label.val(selectedInterestsArr.join(%22%2C%20%22))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20console.log('form%20filled')%3B%0A%20%20%7D%0A%0A%20%20function%20progressFormViaURL(form)%20%7B%0A%0A%20%20%20%20%2F*%201%EF%B8%8F%E2%83%A3%20%20Short%E2%80%91circuit%20if%20the%20form%20has%20already%20been%20submitted%20return%20at%20Step1%20*%2F%0A%20%20%20%20if%20(localStorage.getItem(formSubmittedSessionKey))%20%7B%0A%20%20%20%20%20%20%2F%2F%20keep%20only%20the%20first%20step%20active%0A%20%20%20%20%20%20form.find(%22.form-steps__single.active%22).removeClass(%22active%22)%3B%0A%20%20%20%20%20%20const%20firstStep%20%3D%20form.find(%22%23schedule-step-0%22).addClass(%22active%22)%3B%0A%20%20%20%20%20%20%2F%2F%20reset%20the%20progress%20bar%20to%200%C2%A0%25%0A%20%20%20%20%20%20adjustProgress(form%2C%20firstStep%2C%20false)%3B%20%20%20%0A%20%20%20%20%20%20return%3B%20%20%20%2F%2F%20nothing%20else%20should%20run%0A%20%20%20%20%7D%0A%0A%20%20%20%20let%20fieldValue%20%3D%20getUrlParam(%22step%22%2C%20%5Bwindow.location.href%5D)%3B%0A%0A%20%20%20%20if(fieldValue%20%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20let%20sessionData%20%3D%20getFormSession(formSessionKey)%3B%0A%20%20%20%20%20%20if%20(sessionData%5B%22step%22%5D%20!%3D%3D%20undefined%20%26%26%20sessionData%5B%22step%22%5D%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20fieldValue%20%3D%20sessionData%5B%22step%22%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if(fieldValue%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20let%20stepNum%20%3D%20parseInt(fieldValue)%3B%0A%20%20%20%20%20%20if%20(!isNaN(stepNum))%20%7B%0A%20%20%20%20%20%20%20%20if(stepNum%20%3E%200%20%26%26%20stepNum%20%3C%204)%20%7B%0A%20%20%20%20%20%20%20%20%20%20console.log(form)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(form.hasClass('form-new-v2')%20%26%26%20stepNum%20%3D%3D%3D%203)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20stepNum%20%3D%202%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20let%20valid%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20for(let%20i%20%3D%200%3B%20i%20%3C%20stepNum%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20step%20%3D%20form.find(%60%23schedule-step-%24%7Bi%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20valid%20%3D%20stepValidation(form%2C%20step)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(valid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20progressForm(form%2C%20step)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20let%20step%20%3D%20form.find(%60%23schedule-step-0%60)%3B%0A%20%20%20%20%20%20adjustProgress(form%2C%20step%2C%20false%2C%20true)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20getFormSession(session)%20%7B%0A%20%20%20%20if%20(!localStorage.getItem(session))%20%7B%0A%20%20%20%20%20%20var%20data%20%3D%20%7B%0A%20%20%20%20%20%20%20%20timestamp%3A%20Date.now()%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Store%20the%20JSON%20string%20in%20local%20storage%0A%20%20%20%20%20%20localStorage.setItem(session%2C%20JSON.stringify(data))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Optionally%2C%20retrieve%20and%20log%20the%20stored%20object%20to%20verify%0A%20%20%20%20var%20storedData%20%3D%20localStorage.getItem(session)%3B%0A%20%20%20%20var%20storedParsedData%20%3D%20JSON.parse(storedData)%3B%0A%20%20%20%20return%20storedParsedData%3B%0A%20%20%7D%0A%0A%20%20function%20checkFormSessionTime(session)%20%7B%0A%20%20%20%20var%20sessionLength%20%3D%2015%20*%2024%20*%2060%20*%2060%20*%201000%3B%20%2F%2F%2015%20days%20in%20milliseconds%0A%0A%20%20%20%20%2F%2F%20Retrieve%20the%20stored%20object%20from%20local%20storage%0A%20%20%20%20var%20storedString%20%3D%20localStorage.getItem(session)%3B%0A%0A%20%20%20%20if%20(storedString)%20%7B%0A%20%20%20%20%20%20var%20storedData%20%3D%20JSON.parse(storedString)%3B%0A%20%20%20%20%20%20var%20storedTimestamp%20%3D%20storedData.timestamp%3B%0A%20%20%20%20%20%20var%20currentTimestamp%20%3D%20Date.now()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Check%20if%20more%20than%2015%20days%20have%20passed%0A%20%20%20%20%20%20if%20(currentTimestamp%20-%20storedTimestamp%20%3E%20sessionLength)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20More%20than%2015%20days%20have%20passed%2C%20delete%20the%20local%20storage%20item%0A%20%20%20%20%20%20%20%20deleteFormSession(session)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20deleteFormSession(session)%20%7B%0A%20%20%20%20localStorage.removeItem(session)%3B%0A%20%20%7D%0A%0A%20%20function%20getMappedKey(fieldName)%20%7B%0A%20%20%20%20for%20(const%20%5Bkey%2C%20mappedValue%5D%20of%20Object.entries(parameterMapping))%20%7B%0A%20%20%20%20%20%20if%20(mappedValue%20%3D%3D%3D%20fieldName)%20%7B%0A%20%20%20%20%20%20%20%20return%20key%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20null%3B%0A%20%20%7D%0A%0A%20%20function%20updateFormSession(session%2C%20key%2C%20value)%20%7B%0A%20%20%20%20let%20existingData%20%3D%20getFormSession(session)%3B%0A%20%20%20%20if(value%20%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20delete%20existingData%5Bkey%5D%3B%20%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20existingData%5Bkey%5D%20%3D%20value%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20Save%20the%20updated%20content%20to%20local%20storage%0A%20%20%20%20localStorage.setItem(session%2C%20JSON.stringify(existingData))%3B%0A%20%20%7D%0A%0A%20%20function%20isEmptyObject(obj)%20%7B%0A%20%20%20%20return%20Object.keys(obj).length%20%3D%3D%3D%200%20%26%26%20obj.constructor%20%3D%3D%3D%20Object%3B%0A%20%20%7D%0A%0A%20%20function%20formatTimeTo12Hour(timeString)%20%7B%0A%20%20%20%20%2F%2F%20Parse%20the%20time%20string%0A%20%20%20%20let%20%5Bhours%2C%20minutes%2C%20seconds%5D%20%3D%20timeString.split('%3A').map(Number)%3B%0A%0A%20%20%20%20%2F%2F%20Convert%20to%2012-hour%20format%0A%20%20%20%20let%20period%20%3D%20hours%20%3E%3D%2012%20%3F%20'pm'%20%3A%20'am'%3B%0A%20%20%20%20hours%20%3D%20hours%20%25%2012%20%7C%7C%2012%3B%20%2F%2F%20Convert%20hour%200%20to%2012%0A%0A%20%20%20%20%2F%2F%20Format%20the%20time%20string%0A%20%20%20%20return%20%60%24%7Bhours%7D%3A%24%7Bminutes%20%3C%2010%20%3F%20'0'%20%3A%20''%7D%24%7Bminutes%7D%20%24%7Bperiod%7D%60%3B%0A%20%20%7D%0A%3C%2Fscript%3E"
      />
      <_Builtin.HtmlEmbed
        className="hidden-form-location-days-out"
        value="%3Cscript%3E%0A%20%20var%20Webflow%20%3D%20Webflow%20%7C%7C%20%5B%5D%3B%0A%20%20Webflow.push(function%20()%20%7B%0A%20%20%20%20%2F*%20NEW%3A%20read%20URL%20params%20for%20date%20prefills%20(0%2F1%2F2%2F3%20%3D%3E%20tomorrow%20%2B%20N)%20*%2F%0A%20%20%20%20const%20searchParams%20%3D%20new%20URL(window.location.href).searchParams%3B%0A%20%20%20%20const%20rawFirst%20%20%3D%20searchParams.get('days_out_to_schedule')%3B%0A%20%20%20%20const%20rawSecond%20%3D%20searchParams.get('days_out_to_schedule2')%3B%0A%20%20%20%20const%20allowVals%20%3D%20%5B'0'%2C'1'%2C'2'%2C'3'%5D%3B%0A%20%20%20%20const%20paramFirst%20%20%3D%20allowVals.includes(rawFirst)%20%20%3F%20parseInt(rawFirst%2C%2010)%20%20%3A%20null%3B%20%2F%2F%20tomorrow%20%2B%20N%0A%20%20%20%20const%20paramSecond%20%3D%20allowVals.includes(rawSecond)%20%3F%20parseInt(rawSecond%2C%2010)%20%3A%20null%3B%20%2F%2F%20tomorrow%20%2B%20N%0A%0A%20%20%20%20%2F*%20keep%20your%20addDays%20helper%20*%2F%0A%20%20%20%20Date.prototype.addDays%20%3D%20function%20(days)%20%7B%0A%20%20%20%20%20%20var%20date%20%3D%20new%20Date(this.valueOf())%3B%0A%20%20%20%20%20%20date.setDate(date.getDate()%20%2B%20days)%3B%0A%20%20%20%20%20%20return%20date%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F*%20%3D%3D%3D%20Your%20calendar%20init%20(unchanged)%20%3D%3D%3D%20*%2F%0A%20%20%20%20%24(%22form%20.form__input--date%22).each(function%20()%20%7B%0A%20%20%20%20%20%20let%20el%20%3D%20%24(this)%3B%0A%20%20%20%20%20%20el.attr(%22readonly%22%2C%20true)%3B%0A%0A%20%20%20%20%20%20let%20form%20%3D%20el.closest(%22form%22)%3B%0A%20%20%20%20%20%20let%20formName%20%3D%20form.attr(%22name%22)%3B%0A%0A%20%20%20%20%20%20var%20today%20%3D%20new%20Date()%3B%0A%20%20%20%20%20%20var%20firstDate%20%3D%20today.addDays(mindate)%3B%0A%20%20%20%20%20%20var%20lastDate%20%3D%20firstDate.addDays(730)%3B%0A%0A%20%20%20%20%20%20if%20(dateCalendarInstances%5BformName%5D%20%3D%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20dateCalendarInstances%5BformName%5D%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20dateCalendarInstances%5BformName%5D.push(%0A%20%20%20%20%20%20%20%20mobiscroll.datepicker('%23'%20%2B%20%24(this).attr('id')%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20controls%3A%20%5B'calendar'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20select%3A%20'date'%2C%0A%20%20%20%20%20%20%20%20%20%20selectMultiple%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20dateFormat%3A%20'MM%2FDD%2FYYYY'%2C%0A%20%20%20%20%20%20%20%20%20%20display%3A%20'anchored'%2C%0A%20%20%20%20%20%20%20%20%20%20touchUi%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20theme%3A%20'closetworld-theme'%2C%0A%20%20%20%20%20%20%20%20%20%20firstDay%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20min%3A%20firstDate%2C%0A%20%20%20%20%20%20%20%20%20%20max%3A%20lastDate%2C%0A%20%20%20%20%20%20%20%20%20%20defaultSelection%3A%20firstDate%2C%0A%20%20%20%20%20%20%20%20%20%20invalid%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20recurring%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20repeat%3A%20'weekly'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20weekDays%3A%20'SU'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20...(form.hasClass(%22calendar--inline%22)%20%26%26%20%7B%20display%3A%20'inline'%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20onChange%3A%20function%20(args%2C%20inst)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20dtEl%20%3D%20%24(inst.props.element)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20elName%20%3D%20inst.props.name.replace(%2F%5Cs%2B%2Fg%2C%20'-')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20dateParts%20%3D%20args.valueText.split('%2F')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20date%20%3D%20new%20Date(dateParts%5B2%5D%2C%20dateParts%5B0%5D%20-%201%2C%20dateParts%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20dayName%20%3D%20date.toLocaleDateString(locale%2C%20%7B%20weekday%3A%20'long'%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20updateFormSession(formSessionKey%2C%20getMappedKey(elName)%2C%20args.valueText)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(form.hasClass(%22form-multi-steps%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dateParts%5B2%5D%20%3D%20dateParts%5B2%5D.slice(-2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20formattedDate%20%3D%20%60%24%7BdateParts%5B0%5D%7D%2F%24%7BdateParts%5B1%5D%7D%2F%24%7BdateParts%5B2%5D%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fieldValidation(dtEl%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find('span%5Bdata-date-appt1%5D%2C%20span%5Bdata-date-appt2%5D').each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20span%20%3D%20%24(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20dataAttr%20%3D%20span.attr('data-date-appt1')%20%3F%20'data-date-appt1'%20%3A%20'data-date-appt2'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(dataAttr%20%3D%3D%3D%20'data-date-appt1'%20%26%26%20inst.props.name.includes('First'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20span.text(%60%24%7BdayName%7D%2C%20%24%7BformattedDate%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(dataAttr%20%3D%3D%3D%20'data-date-appt2'%20%26%26%20inst.props.name.includes('Second'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20span.text(%60%24%7BdayName%7D%2C%20%24%7BformattedDate%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fieldValidation(dtEl)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%2F*%20%3D%3D%3D%20ZIP%20change%20(your%20block%3B%20additions%20are%20labeled%20NEW)%20%3D%3D%3D%20*%2F%0A%20%20%20%20%24(%22form%20.form__input--zip%22).on(%22change%22%2C%20function%20()%20%7B%0A%20%20%20%20%20%20let%20zipField%20%3D%20%24(this)%2C%0A%20%20%20%20%20%20%20%20%20%20zip%20%3D%20zipField.val()%2C%0A%20%20%20%20%20%20%20%20%20%20form%20%3D%20zipField.closest(%22form%22)%3B%0A%0A%20%20%20%20%20%20if%20(zip%20!%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20zip%20%3D%20zip.toUpperCase()%3B%0A%0A%20%20%20%20%20%20%20%20const%20defaultLocationData%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20location_id%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20location_days_out%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20NumOfDaysOut%3A%205%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Saturdays%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Sundays%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20cut_off_time%3A%20%2200%3A00%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20location_emails%3A%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20let%20minDate%20%3D%20defaultLocationData.location_days_out.NumOfDaysOut%3B%0A%20%20%20%20%20%20%20%20let%20info%20%3D%20defaultLocationData.location_days_out%3B%0A%20%20%20%20%20%20%20%20let%20locationId%20%3D%20defaultLocationData.location_id%3B%0A%20%20%20%20%20%20%20%20let%20emailValues%20%3D%20defaultLocationData.location_emails%3B%0A%0A%20%20%20%20%20%20%20%20%24.ajax(%7B%0A%20%20%20%20%20%20%20%20%20%20url%3A%20%60%24%7BapiUrl%7D%2Flocation-id%3Fzip%3D%24%7Bzip%7D%60%2C%0A%20%20%20%20%20%20%20%20%20%20dataType%3A%20%22json%22%2C%0A%20%20%20%20%20%20%20%20%20%20timeout%3A%203000%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20.done(function%20(data)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20info%20%3D%20data.location_days_out%20%7C%7C%20defaultLocationData.location_days_out%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20locationId%20%3D%20data.location_id%20%7C%7C%20defaultLocationData.location_id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20emailValues%20%3D%20data.location_emails%20%7C%7C%20defaultLocationData.location_emails%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20daysOut%20%3D%20parseInt(info.NumOfDaysOut)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minDate%20%3D%20daysOut%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20daysOut%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20date%20%3D%20new%20Date()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20date.setDate(date.getDate()%20%2B%20i)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20day%20%3D%20date.getDay()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(day%20%3D%3D%3D%200%20%26%26%20info.Sundays%20%3D%3D%3D%200)%20minDate%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(day%20%3D%3D%3D%206%20%26%26%20info.Saturdays%20%3D%3D%3D%200)%20minDate%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(info.cut_off_time%20!%3D%20null%20%26%26%20info.cut_off_time%20!%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20timeArray%20%3D%20info.cut_off_time.split(%22%3A%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20cutoffHour%20%3D%20parseInt(timeArray%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20cutoffMinute%20%3D%20parseInt(timeArray%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20cutOffDateTime%20%3D%20new%20Date()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cutOffDateTime.setHours(cutoffHour%2C%20cutoffMinute%2C%200)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(new%20Date()%20%3E%20cutOffDateTime)%20minDate%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20.fail(function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20info%20%3D%20defaultLocationData.location_days_out%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minDate%20%3D%20defaultLocationData.location_days_out.NumOfDaysOut%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20locationId%20%3D%20defaultLocationData.location_id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20emailValues%20%3D%20defaultLocationData.location_emails%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20.always(function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20locField%20%3D%20form.find('input%5Bname%3D%22Location-ID%22%5D')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(locField.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20locField.val(locationId)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20form.find(%22.form__input--date%22).each(function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20formName%20%3D%20form.attr(%22name%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(dateCalendarInstances%5BformName%5D%20%26%26%20dateCalendarInstances%5BformName%5D.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dateCalendarInstances%5BformName%5D.forEach((calendar)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20today%20%3D%20new%20Date()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20firstDate%20%3D%20today.addDays(minDate)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20lastDate%20%3D%20firstDate.addDays(730)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20args%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20min%3A%20firstDate%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20max%3A%20lastDate%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultSelection%3A%20firstDate%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20weekends%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20weekendsDisabled%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(info.Saturdays%20%3D%3D%3D%200)%20weekends.push(%22SA%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(info.Sundays%20%3D%3D%3D%200)%20weekends.push(%22SU%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(weekends.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20weekendsDisabled%20%3D%20weekends.join(%22%2C%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args.invalid%20%3D%20%5B%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20recurring%3A%20%7B%20repeat%3A%20%22weekly%22%2C%20weekDays%3A%20weekendsDisabled%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args.invalid%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20calendar.setOptions(args)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F*%20NEW%3A%20helper%20that%20advances%20to%20next%20allowed%20date%20per%20calendar%20rules%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20function%20nextAllowed(startCandidate)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20candidate%20%3D%20(startCandidate%20%3C%20args.min)%20%3F%20new%20Date(args.min)%20%3A%20new%20Date(startCandidate)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(args.invalid%20%26%26%20args.invalid.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20dayKeys%20%3D%20%5B'SU'%2C'MO'%2C'TU'%2C'WE'%2C'TH'%2C'FR'%2C'SA'%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20(args.invalid.some(rule%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rule.recurring%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rule.recurring.weekDays%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rule.recurring.weekDays.split('%2C').includes(dayKeys%5Bcandidate.getDay()%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20candidate.setDate(candidate.getDate()%20%2B%201)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(candidate%20%3E%20args.max)%20candidate%20%3D%20new%20Date(args.max)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20candidate%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F*%20NEW%3A%20figure%20out%20which%20field%20this%20calendar%20controls%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20fieldName%20%3D%20%24(calendar.props.element).attr('name')%3B%20%2F%2F%20e.g.%2C%20'First-Choice-Date'%20%7C%20'Second-Choice-Date'%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F*%20NEW%3A%20First%20choice%20date%20prefill%20%2B%20auto%20time%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(paramFirst%20!%3D%3D%20null%20%26%26%20fieldName%20%3D%3D%3D%20'First-Choice-Date')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20base%20%3D%20today.addDays(paramFirst%20%2B%201)%3B%20%20%20%20%20%20%20%2F%2F%20tomorrow%20%2B%20N%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20chosen%20%3D%20nextAllowed(base)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20respect%20min%2Finvalid%2Fmax%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20calendar.setVal(chosen)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20timeSelect%20%3D%20form.find('select%5Bname%3D%22First-Choice-Time%22%5D')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(timeSelect.length)%20timeSelect.val('10%3A00%3A00').change()%3B%20%2F%2F%20set%2010am%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20console.log(%60%5BPrefill%5D%5B%24%7Bform.attr('id')%7D%5D%20First%3A%20param%3D%24%7BparamFirst%7D%2C%20base%3D%24%7Bbase.toLocaleDateString()%7D%2C%20chosen%3D%24%7Bchosen.toLocaleDateString()%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F*%20NEW%3A%20Second%20choice%20date%20prefill%20%2B%20auto%20time%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(paramSecond%20!%3D%3D%20null%20%26%26%20fieldName%20%3D%3D%3D%20'Second-Choice-Date')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20base2%20%3D%20today.addDays(paramSecond%20%2B%201)%3B%20%20%20%20%20%20%2F%2F%20tomorrow%20%2B%20N%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20chosen2%20%3D%20nextAllowed(base2)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20respect%20min%2Finvalid%2Fmax%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20calendar.setVal(chosen2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20timeSelect2%20%3D%20form.find('select%5Bname%3D%22Second-Choice-Time%22%5D')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(timeSelect2.length)%20timeSelect2.val('10%3A00%3A00').change()%3B%20%2F%2F%20set%2010am%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20console.log(%60%5BPrefill%5D%5B%24%7Bform.attr('id')%7D%5D%20Second%3A%20param2%3D%24%7BparamSecond%7D%2C%20base%3D%24%7Bbase2.toLocaleDateString()%7D%2C%20chosen%3D%24%7Bchosen2.toLocaleDateString()%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F*%20Session%20Data%20and%20Date%20Inputs%20(unchanged)%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20sessionData%20%3D%20getFormSession(formSessionKey)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(%24(this).attr(%22name%22)%20%3D%3D%3D%20%22First-Choice-Date%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20apptDate1%20%3D%20getUrlParam(%22apptDate1%22%2C%20%5Bwindow.location.href%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(apptDate1%20%3D%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(sessionData%5B%22apptDate1%22%5D%20!%3D%3D%20undefined%20%26%26%20sessionData%5B%22apptDate1%22%5D%20!%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20apptDate1%20%3D%20sessionData%5B%22apptDate1%22%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(apptDate1%20%3D%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this).val(%22%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(%24(this).attr(%22name%22)%20%3D%3D%3D%20%22Second-Choice-Date%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20apptDate2%20%3D%20getUrlParam(%22apptDate2%22%2C%20%5Bwindow.location.href%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(apptDate2%20%3D%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(sessionData%5B%22apptDate2%22%5D%20!%3D%3D%20undefined%20%26%26%20sessionData%5B%22apptDate2%22%5D%20!%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20apptDate2%20%3D%20sessionData%5B%22apptDate2%22%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(apptDate2%20%3D%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this).val(%22%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this).val(%22%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F*%20Emails%20(unchanged)%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20emails%20%3D%20form.find('input%5Bname%3D%22Form-Emails%22%5D')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(emails.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(emailValues.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20ccEmails%20%3D%20emailValues.join(%22%2C%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(locationId%20!%3D%3D%201%20%26%26%20locationId%20!%3D%3D%202%20%26%26%20locationId%20!%3D%3D%2031)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ccEmails%20%2B%3D%20%22%2Cljensen%40closetsbydesign.com%2Crequestconsultation%40closetsbydesign.net%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20emails.val(ccEmails)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20emails.val(%22ljensen%40closetsbydesign.com%2Crequestconsultation%40closetsbydesign.net%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20emails.val(%22ljensen%40closetsbydesign.com%2Crequestconsultation%40closetsbydesign.net%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%7D)%3B%0A%3C%2Fscript%3E"
      />
      <_Builtin.HtmlEmbed
        className="hidden-form-logic"
        value="%3Cscript%3E%0Avar%20Webflow%20%3D%20Webflow%20%7C%7C%20%5B%5D%3B%0AWebflow.push(function()%20%7B%0A%20%20checkFormSessionTime(formSessionKey)%3B%0A%20%20checkFormSessionTime(step1SessionKey)%3B%0A%20%20checkFormSessionTime(formSubmittedSessionKey)%3B%0A%20%20%2F%2FcheckFormSessionTime(formPopupSessionKey)%3B%0A%20%20trackPhoneClicks()%3B%0A%0A%20%20let%20step1Url%20%3D%20(new%20URL(window.location.href)).searchParams%3B%0A%20%20if(step1Url.get(%22step1-form%22)%20%3D%3D%20%221%22)%20%7B%0A%20%20%20%20document.querySelector(%22.notice--step1%22).style.display%20%3D%20%22block%22%3B%0A%20%20%7D%0A%20%20const%20promptMessage%20%3D%20lang%20%3D%3D%20'en'%20%3F%20%22Requests%20are%20confirmed%20within%2024%20hours%20via%20email%20or%20phone.%20Change%20appointment%20details%20by%20calling%20or%20replying%20to%20the%20confirmation%20email.%20Click%20'OK'%2C%20to%20continue%20with%20another%20submission.%22%20%3A%20%22Las%20solicitudes%20se%20confirman%20dentro%20de%20las%2024%20horas%20por%20correo%20electr%C3%B3nico%20o%20tel%C3%A9fono.%20Modifique%20los%20detalles%20de%20su%20cita%20llamando%20o%20respondiendo%20al%20correo%20de%20confirmaci%C3%B3n.%20Haga%20clic%20en%20%E2%80%9COK%E2%80%9D%20para%20continuar%20con%20otra%20solicitud.%22%3B%0A%0A%20%20if(document.querySelector('.btn--resubmit')%20!%3D%3D%20null)%20%7B%0A%20%20%20%20%24('.btn--resubmit').click(function(e)%20%7B%0A%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20if%20(window.confirm(promptMessage)%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20%24('html%2C%20body').animate(%7B%20scrollTop%3A%20%24('.already-scheduled').offset().top%20%7D%2C%2050)%3B%0A%20%20%20%20%20%20%20%20%24('.already-scheduled').hide(0%2C%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%24(%22.form-steps__progress%22).css(%22display%22%2C%20%22block%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%24(%22.section-promo-header__wrap%22).css(%22display%22%2C%20%22block%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%24(%22.section-promo-footer__wrap%22).css(%22display%22%2C%20%22block%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%24(%22.form-block.is--multistep%22).show(600%2C%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24('html%2C%20body').animate(%7B%20scrollTop%3A%20%24(this).find(%22.link-holder%22).offset().top%20%7D%2C%20300)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20%2F%2F%20Loading%20Screen%20Animation%0A%20%20const%20loadingScreen%20%3D%20document.querySelector('.loading-screen')%20%3F%20document.querySelector('.loading-screen')%20%3A%20null%3B%0A%20%20const%20lsText%20%3D%20document.querySelector('.loading-screen__text')%20%3F%20document.querySelector('.loading-screen__text')%20%3A%20null%3B%0A%20%20const%20lsBarLine%20%3D%20document.querySelector('.loading-screen__bar--line')%20%3F%20document.querySelector('.loading-screen__bar--line')%20%3A%20null%3B%0A%20%20const%20lsPercentage%20%3D%20document.querySelector('.loading-screen__percentage')%20%3F%20document.querySelector('.loading-screen__percentage')%20%3A%20null%3B%0A%20%20const%20lottiePlayer%20%3D%20loadingScreen.getElementsByTagName(%22lottie-player%22)%20%3F%20loadingScreen.getElementsByTagName(%22lottie-player%22)%20%3A%20null%3B%0A%20%20const%20triggerLoading%20%3D%20document.querySelector('.trigger-loading')%20%3F%20document.querySelector('.trigger-loading')%20%3A%20null%3B%0A%0A%20%20const%20loadingTexts%20%3D%20lang%20%3D%3D%3D%20'en'%0A%20%20%3F%20%7B%0A%20%20%20%20phase1%3A%20%22Building%20the%20closet...%22%2C%0A%20%20%20%20phase2%3A%20%22Installing%20the%20shelves...%22%2C%0A%20%20%20%20phase3%3A%20%22Finishing%20touches...%22%2C%0A%20%20%20%20done%3A%20%22Done%22%0A%20%20%7D%0A%20%20%3A%20%7B%0A%20%20%20%20phase1%3A%20%22Construyendo%20el%20armario...%22%2C%0A%20%20%20%20phase2%3A%20%22Instalando%20los%20estantes...%22%2C%0A%20%20%20%20phase3%3A%20%22Toques%20finales...%22%2C%0A%20%20%20%20done%3A%20%22Completado%22%0A%20%20%7D%3B%0A%0A%20%20let%20percentage%20%3D%200%3B%0A%20%20let%20progressInterval%3B%0A%0A%20%20const%20updateProgress%20%3D%20(reset)%20%3D%3E%20%7B%0A%20%20%20%20percentage%20%2B%3D%201%3B%0A%20%20%20%20lsBarLine.style.width%20%3D%20percentage%20%2B%20'%25'%3B%0A%20%20%20%20lsPercentage.textContent%20%3D%20percentage%20%2B%20'%25'%3B%0A%20%20%20%20if%20(percentage%20%3C%3D%2050)%20%7B%0A%20%20%20%20%20%20lsText.textContent%20%3D%20loadingTexts.phase1%3B%0A%20%20%20%20%7D%20else%20if%20(percentage%20%3E%2050%20%26%26%20percentage%20%3C%3D%2097)%20%7B%0A%20%20%20%20%20%20lsText.textContent%20%3D%20loadingTexts.phase2%3B%0A%20%20%20%20%7D%20else%20if%20(percentage%20%3E%2097%20%26%26%20percentage%20%3C%20100)%20%7B%0A%20%20%20%20%20%20lsText.textContent%20%3D%20loadingTexts.phase3%3B%0A%20%20%20%20%20%20clearInterval(progressInterval)%3B%0A%20%20%20%20%20%20if%20(reset)%20%7B%0A%20%20%20%20%20%20%20%20triggerFinalStage()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20const%20triggerFinalPhase%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20percentage%20%3D%20100%3B%0A%20%20%20%20lsBarLine.style.width%20%3D%20percentage%20%2B%20'%25'%3B%0A%20%20%20%20lsPercentage.textContent%20%3D%20percentage%20%2B%20'%25'%3B%0A%20%20%20%20lsText.textContent%20%3D%20loadingTexts.done%3B%0A%20%20%7D%0A%20%20const%20triggerFinalStage%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20percentage%20%3D%20100%3B%0A%20%20%20%20%20%20lsBarLine.style.width%20%3D%20percentage%20%2B%20'%25'%3B%0A%20%20%20%20%20%20lsPercentage.textContent%20%3D%20percentage%20%2B%20'%25'%3B%0A%20%20%20%20%20%20lsText.textContent%20%3D%20loadingTexts.done%3B%0A%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20loadingScreen.classList.remove('open')%3B%0A%20%20%20%20%20%20%7D%2C%20500)%3B%0A%20%20%20%20%7D%2C%201000)%3B%0A%20%20%7D%3B%0A%0A%20%20if(triggerLoading)%20%7B%0A%20%20%20%20triggerLoading.addEventListener('click'%2C%20function()%20%7B%0A%20%20%20%20%20%20loadingScreen.classList.add('open')%3B%0A%20%20%20%20%20%20if%20(Array.isArray(lottiePlayer)%20%26%26%20lottiePlayer%5B0%5D%20%26%26%20typeof%20lottiePlayer%5B0%5D.stop%20%3D%3D%3D%20'function')%20%7B%0A%20%20%20%20%20%20%20%20lottiePlayer%5B0%5D.play()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20progressInterval%20%3D%20setInterval(()%20%3D%3E%20updateProgress(true)%2C%2024)%3B%20%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20if(document.querySelector('.already-scheduled')%20!%3D%3D%20null)%20%7B%0A%20%20%20%20if(localStorage.getItem(formSubmittedSessionKey))%20%7B%0A%20%20%20%20%20%20let%20data%20%3D%20JSON.parse(localStorage.getItem(formSubmittedSessionKey))%3B%0A%20%20%20%20%20%20if%20(!data.hasOwnProperty('Comments'))%20%7B%0A%20%20%20%20%20%20%20%20const%20commentsElement%20%3D%20document.querySelector('.already-scheduled__data%20%5Bdata-key%3D%22Comments%22%5D')%3B%0A%20%20%20%20%20%20%20%20if%20(commentsElement)%20%7B%0A%20%20%20%20%20%20%20%20%20%20commentsElement.innerText%20%3D%20''%3B%0A%20%20%20%20%20%20%20%20%20%20const%20parentDiv%20%3D%20commentsElement.parentElement%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(parentDiv)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20parentDiv.style.display%20%3D%20'none'%3B%20%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Object.keys(data).forEach(function(key)%20%7B%0A%20%20%20%20%20%20%20%20const%20elements%20%3D%20document.querySelectorAll('.already-scheduled__data%20%5Bdata-key%3D%22'%20%2B%20key%20%2B%20'%22%5D')%3B%0A%20%20%20%20%20%20%20%20elements.forEach(function(element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(element%20!%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20insertValue%20%3D%20data%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(key%20%3D%3D%20%22Address%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(data%5B'Unit'%5D%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertValue%20%2B%3D%20'%20'%20%2B%20data%5B'Unit'%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertValue%20%2B%3D%20'%2C%20'%20%2B%20data%5B'City'%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertValue%20%2B%3D%20'%2C%20'%20%2B%20data%5B'State'%5D%20%2B%20'%20'%20%2B%20data%5B'ZIP-Code'%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertValue%20%2B%3D%20'%2C%20'%20%2B%20data%5B'Country'%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20encodedAddress%20%3D%20encodeURIComponent(insertValue.replace(%2F%20%2Fg%2C%20'%2B'))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20mapUrl%20%3D%20%60https%3A%2F%2Fwww.google.com%2Fmaps%2Fembed%2Fv1%2Fplace%3Fkey%3D%24%7BgMapsApiKey%7D%26q%3D%24%7BencodedAddress%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20iframeHTML%20%3D%20%60%3Ciframe%20id%3D%22map-address-iframe%22%20width%3D%22450%22%20height%3D%22240%22%20frameborder%3D%220%22%20style%3D%22border%3A0%22%20referrerpolicy%3D%22no-referrer-when-downgrade%22%20src%3D%22%24%7BmapUrl%7D%22%20allowfullscreen%3E%3C%2Fiframe%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.getElementById('address-map').innerHTML%20%3D%20iframeHTML%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if(key.includes(%22Choice-Time%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(insertValue%20!%3D%3D%20%22Other%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(insertValue.includes('am')%20%7C%7C%20insertValue.includes('pm'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertValue%20%3D%20insertValue.toUpperCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertValue%20%3D%20formatTimeTo12Hour(insertValue).toUpperCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if(key.includes(%22Choice-Date%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20date%20%3D%20new%20Date(insertValue)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertValue%20%3D%20date.toLocaleString(locale%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20weekday%3A%20%22long%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20day%3A%20%222-digit%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20month%3A%20'2-digit'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20year%3A%20%22numeric%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if(key%20%3D%3D%20%22timestamp%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20date%20%3D%20new%20Date(insertValue)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertValue%20%3D%20date.toLocaleString(locale%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20day%3A%20%222-digit%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20month%3A%20'short'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20year%3A%20%22numeric%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20element.innerText%20%3D%20insertValue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20document.querySelector(%22.already-scheduled%22).classList.remove(%22hide%22)%3B%0A%20%20%20%20%20%20document.querySelector(%22.form-block.is--multistep%22)%20%3F%20(document.querySelector(%22.form-block.is--multistep%22).style.display%20%3D%20%22none%22)%20%3A%20null%3B%0A%20%20%20%20%20%20document.querySelector(%22.section-promo-header__wrap%22)%20%3F%20(document.querySelector(%22.section-promo-header__wrap%22).remove())%20%3A%20null%3B%0A%20%20%20%20%20%20document.querySelector(%22.section-promo-footer__wrap%22)%20%3F%20(document.querySelector(%22.section-promo-footer__wrap%22).style.display%20%3D%20%22none%22)%20%3A%20null%3B%0A%20%20%20%20%20%20document.querySelector(%22.form-steps__progress%22)%20%3F%20(document.querySelector(%22.form-steps__progress%22).style.display%20%3D%20%22none%22)%20%3A%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20if(document.querySelector('.not_already-scheduled')%20!%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20document.querySelector(%22.not_already-scheduled%22).classList.remove(%22hide%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20if(document.querySelector('.step1-form')%20!%3D%3D%20null)%20%7B%0A%20%20%20%20if(localStorage.getItem(step1SessionKey))%20%7B%0A%20%20%20%20%20%20document.querySelectorAll(%22.step1-form%22).forEach((formWrapper)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20formWrapper.querySelector('.form-block.is--step1').style.display%20%3D%20%22none%22%3B%0A%20%20%20%20%20%20%20%20formWrapper.querySelector('.btn--continue').style.display%20%3D%20%22flex%22%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20document.querySelectorAll(%22.step1-form%22).forEach((formWrapper)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20formWrapper.querySelector('.btn--continue').style.display%20%3D%20%22none%22%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%24(document).on('keypress'%2C%20function%20(e)%20%7B%0A%20%20%20%20let%20key%20%3D%20e.which%3B%0A%20%20%20%20if%20(%24('form.form-multi-steps').length%20%3E%200)%20%7B%0A%20%20%20%20%20%20if%20(key%20%3D%3D%2013)%20%7B%0A%20%20%20%20%20%20%20%20%24('form.form-multi-steps%20.form-steps__single.active%20.form__submit-btns--inner%20.btn').click()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(%24('form.form-multi-steps%20%23schedule-step-2').hasClass(%22active%22))%20%7B%0A%20%20%20%20%20%20%20%20if%20(key%20%3E%3D%2049%20%26%26%20key%20%3C%3D%2056)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20char%20%3D%20String.fromCharCode(key)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20checkbox%20%3D%20%24(%22input%5Btype%3D'checkbox'%5D%5Bdata-value%3D'%22%20%2B%20char%20%2B%20%22'%5D%22)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(checkbox.is(%22%3Achecked%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkbox.prop('checked'%2C%20false)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20checkbox.prop('checked'%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20checkbox.trigger(%22change%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20%24(%22form%22).each(async%20function()%7B%0A%20%20%20%20let%20form%20%3D%20%24(this)%2C%0A%20%20%20%20%20%20%20%20msg%20%3D%20%22This%20field%20is%20required.%22%0A%20%20%20%20fillHiddenFields(form)%3B%0A%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2F%20if%20multistep%0A%20%20%20%20if%20(form.hasClass(%22form-multi-steps%22))%20%7B%0A%20%20%20%20%20%20let%20allSteps%20%3D%20form.find(%22.form-steps__single%22).toArray()%3B%0A%20%20%20%20%20%20%2F%2F%20set%20initial%20formValidFields%0A%20%20%20%20%20%20for%20await%20(const%20step%20of%20allSteps)%20%7B%0A%20%20%20%20%20%20%20%20let%20inputs%20%3D%20%24(step).find(%22.form__input%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20selects%20%3D%20%24(step).find(%22select%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20checkboxes%20%3D%20%24(step).find('.form__checkbox-input%3Anot(.is--consent)')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20radiobuttons%20%3D%20%24(step).find('.form__radiobutton-input')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20allFields%20%3D%20inputs.add(selects).add(radiobuttons)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(form.hasClass(%22form-checkbox-validation%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20allFields%20%3D%20allFields.add(checkboxes)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20let%20allFieldsArr%20%3D%20allFields.toArray()%3B%0A%20%20%20%20%20%20%20%20for%20await%20(const%20field%20of%20allFieldsArr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(%24(field).prop('required'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if(%24(field).hasClass(%22form__radiobutton-input%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20groupName%20%3D%20%24(field).attr(%22name%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%5BgroupName%5D%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if(%24(field).hasClass(%22form__checkbox-input%22)%20%26%26%20!%24(field).hasClass(%22is--consent%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20groupId%20%3D%20%22Interests-Group%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%5BgroupId%5D%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20fillFormViaURLorSession(form)%3B%0A%20%20%20%20%20%20for%20await%20(const%20step%20of%20allSteps)%20%7B%0A%20%20%20%20%20%20%20%20let%20inputs%20%3D%20%24(step).find(%22.form__input%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20selects%20%3D%20%24(step).find(%22select%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20radiobuttons%20%3D%20%24(step).find('.form__radiobutton-input')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20checkboxes%20%3D%20%24(step).find('.form__checkbox-input%3Anot(.is--consent)')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20allFields%20%3D%20inputs.add(selects).add(radiobuttons)%3B%0A%20%20%20%20%20%20%20%20if%20(form.hasClass(%22form-checkbox-validation%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20allFields%20%3D%20allFields.add(checkboxes)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20allFieldsArr%20%3D%20allFields.toArray()%3B%0A%20%20%20%20%20%20%20%20for%20await%20(const%20field%20of%20allFieldsArr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(%24(field).prop('required'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%24(field).attr(%22name%22)%20%3D%3D%20%22Country%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20fieldValue%20%3D%20getUrlParam(%22country%22%2C%20%5Bwindow.location.href%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(fieldValue%20%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20sessionData%20%3D%20getFormSession(formSessionKey)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(sessionData%5B%22country%22%5D%20!%3D%3D%20undefined%20%26%26%20sessionData%5B%22country%22%5D%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fieldValue%20%3D%20sessionData%5B%22country%22%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(fieldValue%20%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(field).find('option%5Bvalue%3D%22US%22%5D').attr(%22selected%22%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5Btrue%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20fieldVal%20%3D%20%24(field).val()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(fieldVal%20%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5Bfalse%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(%24(field).attr(%22name%22)%20%3D%3D%20%22Email%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20valid%20%3D%20await%20validateEmail(fieldVal)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20emailMsg%20%3D%20msg%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!valid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20emailMsg%20%3D%20%22Invalid%20e-mail%20address.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5Bvalid%2C%20emailMsg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(%24(field).attr(%22name%22)%20%3D%3D%20%22Phone-Number%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20valid%20%3D%20await%20validatePhoneNumber(fieldVal)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20phoneMsg%20%3D%20msg%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(!valid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20phoneMsg%20%3D%20%22Invalid%20phone%20number.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5Bvalid%2C%20phoneMsg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(%24(field).attr(%22name%22)%20%3D%3D%20%22ZIP-Code%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20valid%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20zipMsg%20%3D%20msg%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20country%20%3D%20form.find(%22%5Bname%3D'Country'%5D%22).val()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(country%20%3D%3D%20%22US%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20valid%20%3D%20usZipPattern.test(fieldVal)%20%7C%7C%20caZipPattern.test(fieldVal)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!valid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zipMsg%20%3D%20%22Invalid%20ZIP%20code.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(country%20%3D%3D%20%22CA%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20valid%20%3D%20usZipPattern.test(fieldVal)%20%7C%7C%20caZipPattern.test(fieldVal)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!valid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zipMsg%20%3D%20%22Invalid%20ZIP%20code.%20Please%20use%20Canadian%20format%20A9A%209A9%2C%20where%20A%20is%20a%20letter%20and%209%20is%20a%20digit.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20valid%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5Bvalid%2C%20zipMsg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5Btrue%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if(%24(field).hasClass(%22form__checkbox-input%22)%20%26%26%20!%24(field).hasClass(%22is--consent%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20sessionData%20%3D%20getFormSession(formSessionKey)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20groupId%20%3D%20%22Interests-Group%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(sessionData%5B%22interests%22%5D%20!%3D%3D%20undefined%20%26%26%20sessionData%5B%22interests%22%5D%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%5BgroupId%5D%20%3D%20%5Btrue%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%5BgroupId%5D%20%3D%20%5Bfalse%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if(%24(field).hasClass(%22form__radiobutton-input%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20sessionData%20%3D%20getFormSession(formSessionKey)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20groupName%20%3D%20%24(field).attr(%22name%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(sessionData%5B%22apptTime1%22%5D%20!%3D%3D%20undefined%20%26%26%20sessionData%5B%22apptTime1%22%5D%20!%3D%20%22%22%20%26%26%20sessionData%5B%22apptTime2%22%5D%20!%3D%3D%20undefined%20%26%26%20sessionData%5B%22apptTime2%22%5D%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%5BgroupName%5D%20%3D%20%5Btrue%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(step).attr(%22id%22)%5D%5BgroupName%5D%20%3D%20%5Bfalse%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!form%5B0%5D.name.includes(%22Appointment-Form-Popup%22))%20%7B%0A%20%20%20%20%20%20%20%20progressFormViaURL(form)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20let%20inputs%20%3D%20form.find(%22.form__input%22)%2C%0A%20%20%20%20%20%20%20%20%20%20selects%20%3D%20form.find(%22select%22)%2C%0A%20%20%20%20%20%20%20%20%20%20radiobuttons%20%3D%20form.find('.form__radiobutton-input')%2C%0A%20%20%20%20%20%20%20%20%20%20checkboxes%20%3D%20form.find('.form__checkbox-input%3Anot(.is--consent)')%2C%0A%20%20%20%20%20%20%20%20%20%20allFields%20%3D%20inputs.add(selects).add(radiobuttons)%3B%0A%0A%20%20%20%20%20%20if%20(form.hasClass(%22form-checkbox-validation%22))%20%7B%0A%20%20%20%20%20%20%20%20allFields%20%3D%20allFields.add(checkboxes)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20let%20allFieldsArr%20%3D%20allFields.toArray()%3B%0A%0A%20%20%20%20%20%20for%20await%20(const%20field%20of%20allFieldsArr)%20%7B%0A%20%20%20%20%20%20%20%20if%20(%24(field).prop('required'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%7D%20else%20if(%24(field).hasClass(%22form__radiobutton-input%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20groupName%20%3D%20%24(field).attr(%22name%22)%3B%0A%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5BgroupName%5D%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20fillFormViaURLorSession(form)%3B%0A%0A%20%20%20%20%20%20for%20await%20(const%20field%20of%20allFieldsArr)%20%7B%0A%20%20%20%20%20%20%20%20if%20(%24(field).prop('required'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20if(%24(field).attr(%22name%22)%20%3D%3D%20%22Country%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20fieldValue%20%3D%20getUrlParam(%22country%22%2C%20%5Bwindow.location.href%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(fieldValue%20%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20sessionData%20%3D%20getFormSession(formSessionKey)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(sessionData%5B%22country%22%5D%20!%3D%3D%20undefined%20%26%26%20sessionData%5B%22country%22%5D%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fieldValue%20%3D%20sessionData%5B%22country%22%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if(fieldValue%20%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(field).find('option%5Bvalue%3D%22US%22%5D').attr(%22selected%22%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5Btrue%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20fieldVal%20%3D%20%24(field).val()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(fieldVal%20%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5Bfalse%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(%24(field).attr(%22name%22)%20%3D%3D%20%22Email%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20valid%20%3D%20await%20validateEmail(fieldVal)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20emailMsg%20%3D%20msg%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!valid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20emailMsg%20%3D%20%22Invalid%20e-mail%20address.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5Bvalid%2C%20emailMsg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(%24(field).attr(%22name%22)%20%3D%3D%20%22Phone-Number%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20valid%20%3D%20await%20validatePhoneNumber(fieldVal)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20phoneMsg%20%3D%20msg%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(!valid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20phoneMsg%20%3D%20%22Invalid%20phone%20number.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5Bvalid%2C%20phoneMsg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(%24(field).attr(%22name%22)%20%3D%3D%20%22ZIP-Code%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20valid%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20zipMsg%20%3D%20msg%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20countryField%20%3D%20form.find(%22%5Bname%3D'Country'%5D%22)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(countryField.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20country%20%3D%20countryField.val()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(country%20%3D%3D%20%22US%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20valid%20%3D%20usZipPattern.test(fieldVal)%20%7C%7C%20caZipPattern.test(fieldVal)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!valid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zipMsg%20%3D%20%22Invalid%20ZIP%20code.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(country%20%3D%3D%20%22CA%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20valid%20%3D%20usZipPattern.test(fieldVal)%20%7C%7C%20caZipPattern.test(fieldVal)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!valid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zipMsg%20%3D%20%22Invalid%20ZIP%20code.%20Please%20use%20Canadian%20format%20A9A%209A9%2C%20where%20A%20is%20a%20letter%20and%209%20is%20a%20digit.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20valid%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20valid%20%3D%20usZipPattern.test(fieldVal)%20%7C%7C%20caZipPattern.test(fieldVal)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!valid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zipMsg%20%3D%20%22Invalid%20ZIP%20code.%20Please%20use%205%20digits%20format%20for%20USA%20or%20A9A%209A9%20format%20for%20Canada.%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5Bvalid%2C%20zipMsg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5B%24(field).attr(%22name%22)%5D%20%3D%20%5Btrue%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if(%24(field).hasClass(%22form__checkbox-input%22)%20%26%26%20!%24(field).hasClass(%22is--consent%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20sessionData%20%3D%20getFormSession(formSessionKey)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20groupId%20%3D%20%22Interests-Group%22%3B%0A%20%20%20%20%20%20%20%20%20%20if(sessionData%5B%22interests%22%5D%20!%3D%3D%20undefined%20%26%26%20sessionData%5B%22interests%22%5D%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5BgroupId%5D%20%3D%20%5Btrue%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5BgroupId%5D%20%3D%20%5Bfalse%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if(%24(field).hasClass(%22form__radiobutton-input%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20sessionData%20%3D%20getFormSession(formSessionKey)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20groupName%20%3D%20%24(field).attr(%22name%22)%3B%0A%20%20%20%20%20%20%20%20%20%20if(sessionData%5B%22apptTime1%22%5D%20!%3D%3D%20undefined%20%26%26%20sessionData%5B%22apptTime1%22%5D%20!%3D%20%22%22%20%26%26%20sessionData%5B%22apptTime2%22%5D%20!%3D%3D%20undefined%20%26%26%20sessionData%5B%22apptTime2%22%5D%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5BgroupName%5D%20%3D%20%5Btrue%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20formValidFields%5Bform.attr(%22id%22)%5D%5BgroupName%5D%20%3D%20%5Bfalse%2C%20msg%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20%24('.btn.btn--form-next').click(function()%7B%0A%20%20%20%20let%20submitBtn%20%3D%20%24(this)%2C%0A%20%20%20%20%20%20%20%20step%20%3D%20submitBtn.closest(%22.form-steps__single%22)%2C%0A%20%20%20%20%20%20%20%20stepId%20%3D%20parseInt(step.attr(%22id%22).slice(-1))%2C%0A%20%20%20%20%20%20%20%20form%20%3D%20submitBtn.closest(%22form%22)%2C%0A%20%20%20%20%20%20%20%20valid%20%3D%20stepValidation(form%2C%20step)%3B%0A%0A%20%20%20%20%2F%2F%20GTM%0A%20%20%20%20let%20formID%20%3D%20form.attr('id')%3B%0A%20%20%20%20let%20actualStepID%20%3D%20step.attr('id')%3B%20%0A%20%20%20%20let%20stepNumber%20%3D%20parseInt(actualStepID.split('-').pop()%2C%2010)%3B%0A%20%20%20%20dataLayer.push(%7B%0A%20%20%20%20%20%20event%3A%20'form_step_next'%2C%20%0A%20%20%20%20%20%20form_id%3A%20formID%2C%0A%20%20%20%20%20%20step_number%3A%20stepNumber%2C%0A%20%20%20%20%20%20interaction_type%3A%20'click'%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20if%20(valid)%20%7B%0A%20%20%20%20%20%20if(step.find(%22.form__submit%22).hasClass(%22is--val-error%22))%20%7B%0A%20%20%20%20%20%20%20%20step.find(%22.form__submit%22).removeClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20let%20stepID%20%3D%20parseInt(step.attr(%22id%22).slice(-1))%20%2B%201%3B%0A%20%20%20%20%20%20updateFormSession(formSessionKey%2C%20%22step%22%2C%20stepID)%3B%0A%20%20%20%20%20%20progressForm(form%2C%20step%2C%20%20true%2C%20%20false%2C%20true)%3B%20%0A%20%20%20%20%20%20%2F%2F%20Send%20step%201%20data%20to%20DB%0A%20%20%20%20%20%20if%20(submitBtn.data(%22save-step%22))%20%7B%0A%20%20%20%20%20%20%20%20let%20email%20%3D%20form.find('%5Bname%3D%22Email%22%5D').val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20name%20%3D%20form.find('%5Bname%3D%22First-Name%22%5D').val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20last%20%3D%20form.find('%5Bname%3D%22Last-Name%22%5D').val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20tel%20%3D%20form.find(%22%5Bname%3D'Formatted-Phone-Number'%5D%22).val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20consent%20%3D%20form.find('%5Bname%3D%22Marketing-Consent%22%5D').is(%22%3Achecked%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20input%20%3D%20email%20%2B%20name%20%2B%20last%20%2B%20new%20Date().getTime()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20pageUrl%20%3D%20window.location.href%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20formID%20%3D%20form.find('%5Bname%3D%22Form-ID%22%5D').val()%3B%0A%0A%0A%20%20%20%20%20%20%20%20%24.ajax(%7B%0A%20%20%20%20%20%20%20%20%20%20url%3A%20%60%24%7BapiUrl%7D%2Ftest-domains%60%2C%0A%20%20%20%20%20%20%20%20%20%20dataType%3A%20%22json%22%2C%0A%20%20%20%20%20%20%20%20%20%20timeout%3A%203000%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20.done(function%20(emails%2C%20textStatus%2C%20jqXHR)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(jqXHR.status%20%3D%3D%3D%20200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(Array.isArray(emails)%20%26%26%20emails.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20eParts%20%3D%20email.split(%22%40%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20eDomain%20%3D%20eParts%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(emails.includes(eDomain))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find('%5Bname%3D%22Test-Entry%22%5D').val(%22true%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.warn(%22Unexpected%20data%20format%20or%20empty%20response.%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.warn(%60Unexpected%20response%20status%3A%20%24%7BjqXHR.status%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20.fail(function%20(jqXHR%2C%20textStatus%2C%20errorThrown)%20%7B%0A%20%20%20%20%20%20%20%20%20%20console.error(%22Request%20failed%3A%22%2C%20jqXHR%2C%20textStatus%2C%20errorThrown)%3B%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20.always(async%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20formRawData%20%3D%20new%20FormData(form%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20formUrl%20%3D%20apiUrl%20%2B%20%22%2Fform%2Fstep-1%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20formData%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20formRawData.forEach((value%2C%20key)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formData%5Bkey%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20formData%5B%22Corporate%22%5D%20%3D%20%22true%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20formData%5B%22Service%22%5D%20%3D%20%22true%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20set%20marketing%20consent%20true%2Ffalse%0A%20%20%20%20%20%20%20%20%20%20%20%20formData%5B%22Marketing-Consent%22%5D%20%3D%20consent%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(formData%5B%22Location-ID%22%5D%20%3D%3D%3D%20%220%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formData%5B%22Service%22%5D%20%3D%20%22false%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20!%5B%221%22%2C%20%222%22%2C%20%2231%22%5D.includes(formData%5B%22Location-ID%22%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formData%5B%22Corporate%22%5D%20%3D%20%22false%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20formData%5B%22Form-ID%22%5D%20%3D%3D%3D%20%22string%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formData%5B%22Form-ID%22%5D%20%3D%20parseInt(formData%5B%22Form-ID%22%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20formData%5B%22Form-ID%22%5D%20%3D%206%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20formData%5B%22Location-ID%22%5D%20%3D%3D%3D%20%22string%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formData%5B%22Location-ID%22%5D%20%3D%20parseInt(formData%5B%22Location-ID%22%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%22Step1%20Data%22%2C%20formData)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20generate%20GUID%20step1%20only%20if%20it%20doesn't%20already%20exist%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20checkExistingGUID%20%3D%20JSON.parse(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20localStorage.getItem(formSessionKey)%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!checkExistingGUID.guid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20guid%20%3D%20await%20stringToGuidHash(input)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formData%5B%22Form-Guid%22%5D%20%3D%20guid%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find('%5Bname%3D%22Form-Guid%22%5D').val(guid)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Save%20Guid%20to%20localStorage%20so%20it's%20persistent%20if%20leaving%2Freturning%20to%20the%20form%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20updateFormSession(formSessionKey%2C%20%22guid%22%2C%20guid)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formData%5B%22Form-Guid%22%5D%20%3D%20checkExistingGUID.guid%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find('%5Bname%3D%22Form-Guid%22%5D').val(checkExistingGUID.guid)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Hide%20the%20image%20when%20finishing%20step1%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20formPopupImg%20%3D%20document.querySelector(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22.popup-lightbox-img-cont%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(formPopupImg)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formPopupImg.classList.add(%22form-step1-triggered%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20scroll%20popup%20window%20to%20top%20after%20step1%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(%22.popup-lightbox-form-scroll%22).animate(%7B%20scrollTop%3A%200%20%7D%2C%2050)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20step1Id%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24.ajax(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20url%3A%20formUrl%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%22POST%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20contentType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20JSON.stringify(formData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataType%3A%20%22json%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20success%3A%20function%20(responseData)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log(%22Success%3A%22%2C%20responseData)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(responseData.success)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20step1Id%20%3D%20responseData.id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log(%22Step1%20ID%22%2Cstep1Id)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20submitBtn.removeClass(%22is--loading%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find(%22.form__submit%22).addClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.find(%22.form__validation-msg%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.html(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Form%20submission%20error.%20Please%20try%20again.%20If%20issue%20persist%2C%20contact%20us%20at%20%3Ca%20href%3D%22mailto%3Acustomerservice%40closetworld.com%22%20class%3D%22body-link%22%3E%3Cstrong%3Ecustomerservice%40closetworld.com%3C%2Fstrong%3E%3C%2Fa%3E'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20error%3A%20function%20(jqXHR%2C%20textStatus%2C%20errorThrown)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20submitBtn.removeClass(%22is--loading%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find(%22.form__submit%22).addClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.find(%22.form__validation-msg%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.html(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Form%20submission%20error.%20Please%20try%20again.%20If%20issue%20persist%2C%20contact%20us%20at%20%3Ca%20href%3D%22mailto%3Acustomerservice%40closetworld.com%22%20class%3D%22body-link%22%3E%3Cstrong%3Ecustomerservice%40closetworld.com%3C%2Fstrong%3E%3C%2Fa%3E'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.error(%22Error%3A%22%2C%20textStatus%2C%20errorThrown)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20complete%3A%20function%20(jqXHR%2C%20textStatus)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!window.location.hostname.includes(%22webflow.io%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20function%20trackStep1ScheduleRequest()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20klaviyo.push(%5B'track'%2C%20'Step%201%20-%20Scheduled%20Request'%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Page%20URL'%3ApageUrl%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Form%20ID'%3AformID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Email'%3Aemail%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'First%20Name'%3Aname%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Last%20Name'%3Alast%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Phone%20Number'%3Atel%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Marketing'%3Aconsent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20klaviyo.identify(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'email'%3A%20email%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'%24first_name'%3A%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'%24last_name'%3A%20last%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'%24phone_number'%3A%20tel%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20trackStep1ScheduleRequest)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.error(%22Klaviyo%20error%22%2C%20error)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error(%22Error%20calling%20stringToGuidHash%3A%22%2C%20error)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20step.find(%22.form__submit%22).addClass(%22is--val-error%22)%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20%24('.btn.btn--form-back').click(function()%7B%0A%20%20%20%20let%20submitBtn%20%3D%20%24(this)%3B%0A%20%20%20%20let%20step%20%3D%20submitBtn.closest(%22.form-steps__single%22)%3B%0A%20%20%20%20let%20form%20%3D%20submitBtn.closest(%22form%22)%3B%0A%20%20%20%20let%20stepID%20%3D%20parseInt(step.attr(%22id%22).slice(-1))%20-%201%3B%0A%20%20%20%20%2F%2F%20GTM%0A%20%20%20%20let%20formID%20%3D%20form.attr('id')%3B%0A%20%20%20%20let%20actualStepID%20%3D%20step.attr('id')%3B%20%0A%20%20%20%20let%20stepNumber%20%3D%20parseInt(actualStepID.split('-').pop()%2C%2010)%3B%0A%20%20%20%20dataLayer.push(%7B%0A%20%20%20%20%20%20event%3A%20'form_step_previous'%2C%20%0A%20%20%20%20%20%20form_id%3A%20formID%2C%0A%20%20%20%20%20%20step_number%3A%20stepNumber%2C%0A%20%20%20%20%20%20interaction_type%3A%20'click'%0A%20%20%20%20%7D)%3B%0A%20%20%20%20updateFormSession(formSessionKey%2C%20%22step%22%2C%20stepID)%3B%0A%20%20%20%20progressForm(form%2C%20step%2C%20false%2C%20false%2C%20true)%3B%0A%20%20%7D)%3B%0A%0A%20%20%24(%22form%22).on('change'%2C%20'.form__checkbox-input%3Anot(.is--consent)'%2C%20function()%20%7B%0A%20%20%20%20let%20self%20%3D%20%24(this)%3B%0A%20%20%20%20let%20form%20%3D%20self.closest(%22form%22)%3B%0A%20%20%20%20let%20isMultiStep%20%3D%20false%3B%0A%20%20%20%20let%20hidden%20%3D%20form.find('input%5Bname%3D%22Interests-Label%22%5D')%3B%0A%0A%20%20%20%20if%20(form.hasClass(%22form-checkbox-validation%22))%20%7B%0A%20%20%20%20%20%20fieldValidation(self%2C%20true)%3B%0A%20%20%20%20%20%20let%20step%20%3D%20form.find('.form-steps__single.active')%3B%0A%20%20%20%20%20%20stepErrorCheck(form%2C%20step)%3B%0A%20%20%20%20%7D%20else%20fieldValidation(self)%3B%0A%0A%20%20%20%20let%20sessionData%20%3D%20getFormSession(formSessionKey)%3B%0A%20%20%20%20let%20savedNames%20%3D%20%5B%5D%3B%0A%20%20%20%20if%20(sessionData%5B%22interests%22%5D%20!%3D%3D%20undefined%20%26%26%20sessionData%5B%22interests%22%5D%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20savedNames%20%3D%20sessionData%5B%22interests%22%5D.split(%22%2C%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20name%20%3D%20self.attr(%22name%22)%3B%0A%20%20%20%20if%20(!savedNames.includes(name))%20%7B%0A%20%20%20%20%20%20savedNames.push(name)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20savedNames%20%3D%20savedNames.filter(function%20(item)%20%7B%0A%20%20%20%20%20%20%20%20return%20item%20!%3D%3D%20name%0A%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20let%20newNames%20%3D%20savedNames.join(%22%2C%22)%3B%0A%20%20%20%20updateFormSession(formSessionKey%2C%20%22interests%22%2C%20newNames)%3B%0A%0A%20%20%20%20if%20(form.hasClass(%22form-multi-steps%22))%20isMultiStep%20%3D%20true%3B%0A%0A%20%20%20%20if%20(hidden.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20let%20selectedInterestsTxt%20%3D%20hidden.val()%3B%0A%20%20%20%20%20%20let%20selectedInterestsArr%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20if%20(selectedInterestsTxt%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20selectedInterestsArr%20%3D%20selectedInterestsTxt.split(%22%2C%20%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20let%20valueString%20%3D%20self.attr('name')%3B%0A%20%20%20%20%20%20let%20value%20%3D%20valueString.replace(%22Interests-%22%2C%20%22%22).replace(%2F-%2Fg%2C%20%22%20%22)%3B%0A%0A%20%20%20%20%20%20if%20(self.is(%22%3Achecked%22))%20%7B%0A%20%20%20%20%20%20%20%20if(isMultiStep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20self.closest(%22.form__checkbox%22).addClass(%22is--active%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(!selectedInterestsArr.includes(value))%20%7B%0A%20%20%20%20%20%20%20%20%20%20selectedInterestsArr.push(value)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if(isMultiStep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20self.closest(%22.form__checkbox%22).removeClass(%22is--active%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(selectedInterestsArr.includes(value))%20%7B%0A%20%20%20%20%20%20%20%20%20%20selectedInterestsArr%20%3D%20selectedInterestsArr.filter(function%20(item)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20item%20!%3D%3D%20value%0A%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20let%20newVal%20%3D%20selectedInterestsArr.join(%22%2C%20%22)%3B%0A%20%20%20%20%20%20hidden.val(newVal)%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20%24(%22form%22).on('change'%2C%20'.form__radiobutton-input'%2C%20function()%20%7B%0A%20%20%20%20let%20el%20%3D%20%24(this)%3B%0A%20%20%20%20let%20form%20%3D%20el.closest(%22form%22)%3B%0A%20%20%20%20let%20groupName%20%3D%20el.attr(%22name%22)%3B%0A%20%20%20%20let%20selectedValue%20%3D%20el.val()%3B%0A%0A%20%20%20%20if%20(form.hasClass(%22form-multi-steps%22))%20%7B%0A%20%20%20%20%20%20fieldValidation(el%2C%20true)%3B%0A%20%20%20%20%20%20let%20step%20%3D%20form.find('.form-steps__single.active')%3B%0A%20%20%20%20%20%20stepErrorCheck(form%2C%20step)%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20fieldValidation(el)%3B%0A%0A%20%20%20%20form.find(%60input%5Bname%3D%22%24%7BgroupName%7D%22%5D%60).closest('.form__radiobutton-wrap%3Anot(.form__radiobutton-wrap__other)').removeClass('is--active')%3B%0A%20%20%20%20el.closest('.form__radiobutton-wrap%3Anot(.form__radiobutton-wrap__other)').addClass('is--active')%3B%0A%0A%20%20%20%20updateFormSession(formSessionKey%2C%20getMappedKey(groupName)%2C%20el.val())%3B%0A%0A%20%20%20%20form.find('span%5Bdata-time-appt1%5D%2C%20span%5Bdata-time-appt2%5D').each(function()%20%7B%0A%20%20%20%20%20%20let%20span%20%3D%20%24(this)%3B%0A%20%20%20%20%20%20let%20dataAttr%20%3D%20span.attr('data-time-appt1')%20%3F%20'data-time-appt1'%20%3A%20'data-time-appt2'%3B%0A%20%20%20%20%20%20let%20formattedTimeValue%20%3D%20selectedValue%20%3D%3D%20'Other'%20%3F%20selectedValue%20%3A%20formatTimeTo12Hour(selectedValue)%3B%0A%20%20%20%20%20%20if%20(dataAttr%20%3D%3D%3D%20'data-time-appt1'%20%26%26%20groupName%20%3D%3D%3D%20%22First-Choice-Time%22)%20%7B%0A%20%20%20%20%20%20%20%20span.text(%60%2C%20%24%7BformattedTimeValue%7D%60)%3B%0A%20%20%20%20%20%20%20%20span.removeClass('hidden')%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20else%20if%20(dataAttr%20%3D%3D%3D%20'data-time-appt2'%20%26%26%20groupName%20%3D%3D%3D%20%22Second-Choice-Time%22)%20%7B%0A%20%20%20%20%20%20%20%20span.text(%60%2C%20%24%7BformattedTimeValue%7D%60)%3B%0A%20%20%20%20%20%20%20%20span.removeClass('hidden')%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%7D)%3B%0A%0A%20%20%24(%22form%20.form__input%3Anot(.form__input--email)%3Anot(.form__input--tel)%22).on(%22input%22%2C%20function()%7B%0A%20%20%20%20let%20el%20%3D%20%24(this)%3B%0A%20%20%20%20if%20(el.closest(%22form%22).hasClass(%22form-multi-steps%22))%20%7B%0A%20%20%20%20%20%20fieldValidation(el%2C%20true)%3B%0A%20%20%20%20%20%20let%20form%20%3D%20el.closest(%22form%22)%3B%0A%20%20%20%20%20%20let%20step%20%3D%20form.find('.form-steps__single.active')%3B%0A%20%20%20%20%20%20stepErrorCheck(form%2C%20step)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20fieldValidation(el)%3B%0A%20%20%20%20%7D%0A%20%20%20%20updateFormSession(formSessionKey%2C%20getMappedKey(el.attr(%22name%22))%2C%20el.val())%3B%0A%20%20%7D)%3B%0A%0A%20%20%24(%22form%20textarea%22).on(%22input%20change%22%2C%20function()%7B%0A%20%20%20%20let%20el%20%3D%20%24(this)%3B%0A%20%20%20%20updateFormSession(formSessionKey%2C%20getMappedKey(el.attr(%22name%22))%2C%20el.val())%3B%0A%20%20%7D)%3B%0A%0A%20%20%24(%22form%20.form__input%3Anot(.form__input--date)%2C%20form%20select%22).on(%22change%22%2C%20function()%7B%0A%20%20%20%20let%20el%20%3D%20%24(this)%3B%0A%20%20%20%20if(el.attr(%22name%22)%20%3D%3D%20%22Country%22%20%26%26%20autocompleteEvent%20%3D%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20changeCountry(el.closest(%22form%22)%2C%20el.val())%3B%0A%20%20%20%20%7D%0A%20%20%20%20updateFormSession(formSessionKey%2C%20getMappedKey(el.attr(%22name%22))%2C%20el.val())%3B%0A%20%20%20%20if%20(el.closest(%22form%22).hasClass(%22form-multi-steps%22))%20%7B%0A%20%20%20%20%20%20fieldValidation(el%2C%20true)%3B%0A%20%20%20%20%20%20let%20form%20%3D%20el.closest(%22form%22)%3B%0A%20%20%20%20%20%20let%20step%20%3D%20form.find('.form-steps__single.active')%3B%0A%20%20%20%20%20%20stepErrorCheck(form%2C%20step)%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20fieldValidation(el)%3B%0A%20%20%7D)%3B%0A%0A%20%20%24('form').on('input%20change'%2C%20'input%2C%20select%2C%20textarea'%2C%20function(event)%20%7B%0A%20%20%20%20const%20el%20%3D%20%24(this)%3B%0A%20%20%20%20const%20form%20%3D%20el.closest(%22form%22)%3B%0A%20%20%20%20if%20(form.hasClass('form-multi-steps'))%20%7B%0A%20%20%20%20%20%20const%20checkExistingEvents%20%3D%20JSON.parse(localStorage.getItem(formSessionKey))%3B%0A%20%20%20%20%20%20const%20formId%20%3D%20form.attr('id')%3B%0A%20%20%20%20%20%20const%20step%20%3D%20form.find(%22.form-steps__single.active%22)%3B%0A%20%20%20%20%20%20const%20stepID%20%3D%20step.attr('id')%3B%20%0A%20%20%20%20%20%20const%20stepNumber%20%3D%20parseInt(stepID.split('-').pop()%2C%2010)%3B%0A%0A%20%20%20%20%20%20if%20(!checkExistingEvents.formstarted)%20%7B%0A%20%20%20%20%20%20%20%20window.formStartTime%20%3D%20Date.now()%3B%0A%20%20%20%20%20%20%20%20dataLayer.push(%7B%20event%3A%20'form_started'%2C%20form_id%3A%20formId%2C%20page_url%3A%20window.location.href%2C%20timestamp%3A%20Date.now()%20%7D)%3B%0A%20%20%20%20%20%20%20%20updateFormSession(formSessionKey%2C%20%22formstarted%22%2C%20Date.now())%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(stepNumber%20%3D%3D%3D%200%20%26%26%20!checkExistingEvents.formstepviewed0%20)%20%7B%0A%20%20%20%20%20%20%20%20dataLayer.push(%7B%20event%3A%20'form_step_viewed'%2C%20form_id%3A%20formId%2C%20step_number%3A%20stepNumber%2C%20step_name%3A%20stepID%2C%20timestamp%3A%20Date.now()%20%7D)%3B%0A%20%20%20%20%20%20%20%20updateFormSession(formSessionKey%2C%20%22formstepviewed0%22%2C%20Date.now())%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(stepNumber%20%3D%3D%3D%201%20%26%26%20!checkExistingEvents.formstepviewed1%20)%20%7B%0A%20%20%20%20%20%20%20%20dataLayer.push(%7B%20event%3A%20'form_step_viewed'%2C%20form_id%3A%20formId%2C%20step_number%3A%20stepNumber%2C%20step_name%3A%20stepID%2C%20timestamp%3A%20Date.now()%20%7D)%3B%0A%20%20%20%20%20%20%20%20updateFormSession(formSessionKey%2C%20%22formstepviewed1%22%2C%20Date.now())%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(stepNumber%20%3D%3D%3D%202%20%26%26%20!checkExistingEvents.formstepviewed2%20)%20%7B%0A%20%20%20%20%20%20%20%20dataLayer.push(%7B%20event%3A%20'form_step_viewed'%2C%20form_id%3A%20formId%2C%20step_number%3A%20stepNumber%2C%20step_name%3A%20stepID%2C%20timestamp%3A%20Date.now()%20%7D)%3B%0A%20%20%20%20%20%20%20%20updateFormSession(formSessionKey%2C%20%22formstepviewed2%22%2C%20Date.now())%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(stepNumber%20%3D%3D%3D%203%20%26%26%20!checkExistingEvents.formstepviewed3%20)%20%7B%0A%20%20%20%20%20%20%20%20dataLayer.push(%7B%20event%3A%20'form_step_viewed'%2C%20form_id%3A%20formId%2C%20step_number%3A%20stepNumber%2C%20step_name%3A%20stepID%2C%20timestamp%3A%20Date.now()%20%7D)%3B%0A%20%20%20%20%20%20%20%20updateFormSession(formSessionKey%2C%20%22formstepviewed3%22%2C%20Date.now())%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20%24(%22.form-multi-steps%20%23schedule-step-0%20.form__input%22).on(%22input%20change%22%2C%20function()%20%7B%0A%20%20%20%20adjustProgress(%24(this).closest(%22form%22)%2C%20%24(this).closest(%22.form-steps__single%22)%2C%20false%2C%20true)%3B%0A%20%20%7D)%3B%0A%0A%20%20%24('.btn.btn--form').click(async%20function()%7B%0A%20%20%20%20let%20submitBtn%20%3D%20%24(this)%2C%0A%20%20%20%20%20%20%20%20form%20%3D%20submitBtn.closest(%22form%22)%2C%0A%20%20%20%20%20%20%20%20valid%20%3D%20false%2C%0A%20%20%20%20%20%20%20%20multi%20%3D%20form.hasClass(%22form-multi-steps%22)%2C%0A%20%20%20%20%20%20%20%20step%20%3D%20null%3B%0A%0A%20%20%20%20if(form.data(%22name%22)%20!%3D%3D%20%22Newsletter%20Form%22)%20%7B%0A%20%20%20%20%20%20submitBtn.addClass(%22events-none%22)%3B%0A%20%20%20%20%20%20submitBtn.addClass(%22is--loading%22)%3B%0A%20%20%20%20%20%20let%20phoneField%20%3D%20form.find('%5Bname%3D%22Phone-Number%22%5D')%3B%0A%20%20%20%20%20%20if%20(phoneField.length%20%3E%200%20)%20%7B%0A%20%20%20%20%20%20%20%20let%20formatted%20%3D%20form.find(%22%5Bname%3D'Formatted-Phone-Number'%5D%22)%3B%0A%20%20%20%20%20%20%20%20if(formatted.val()%20%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20itIn%20%3D%20window.intlTelInputGlobals.getInstance(phoneField%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20phoneNum%20%3D%20itIn.getNumber()%3B%0A%20%20%20%20%20%20%20%20%20%20formatted.val(phoneNum)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20let%20locId%20%3D%20form.find(%22%5Bname%3D'Location-ID'%5D%22).val()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Honeypot%20check%20-%20block%20submit%20if%20location_id%20empty%0A%20%20%20%20%20%20if%20(form.data(%22name%22).includes(%22Appointment%20Form%22))%20%7B%0A%20%20%20%20%20%20%20%20if%20(!locId)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(multi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20step%20%3D%20submitBtn.closest(%22.form-steps__single%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20step.find(%22.form__submit%22).addClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20form.find(%22.form__submit%22).addClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20submitBtn.removeClass(%22is--loading%22)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if(form.data(%22name%22)%20%3D%3D%20%22Contact%20Form%22)%20%7B%0A%20%20%20%20%20%20%20%20let%20preventionString%20%3D%20form.find(%22%5Bname%3D'Prevention-String'%5D%22).val()%3B%0A%20%20%20%20%20%20%20%20if%20(preventionString)%20%7B%0A%20%20%20%20%20%20%20%20%20%20submitBtn.removeClass(%22is--loading%22)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%20%2F%2F%20Prevent%20form%20submit%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20let%20service%20%3D%20form.find(%22%5Bname%3D'Service'%5D%22)%3B%0A%20%20%20%20%20%20if(service.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20if(locId%20%3D%3D%20%220%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20service.val(%22false%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20let%20corporate%20%3D%20form.find(%22%5Bname%3D'Corporate'%5D%22)%3B%0A%20%20%20%20%20%20if(corporate.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20if(!%5B%221%22%2C%20%222%22%2C%20%2231%22%5D.includes(locId))%20%7B%0A%20%20%20%20%20%20%20%20%20%20corporate.val(%22false%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if(multi)%20%7B%0A%20%20%20%20%20%20%20%20step%20%3D%20submitBtn.closest(%22.form-steps__single%22)%3B%0A%20%20%20%20%20%20%20%20valid%20%3D%20stepValidation(form%2C%20step)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20valid%20%3D%20formValidation(form%2C%20true)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(valid)%20%7B%0A%20%20%20%20%20%20%20%20let%20email%20%3D%20form.find('%5Bname%3D%22Email%22%5D').val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20name%20%3D%20form.find('%5Bname%3D%22First-Name%22%5D').val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20last%20%3D%20form.find('%5Bname%3D%22Last-Name%22%5D').val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20tel%20%3D%20form.find(%22%5Bname%3D'Formatted-Phone-Number'%5D%22).val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20add%20%3D%20form.find(%22%5Bname%3D'Address'%5D%22).val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20city%20%3D%20form.find(%22%5Bname%3D'City'%5D%22).val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20reg%20%3D%20form.find(%22%5Bname%3D'State'%5D%20option%3Aselected%22).text()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20zip%20%3D%20form.find(%22%5Bname%3D'ZIP-Code'%5D%22).val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20cntry%20%3D%20form.find(%22%5Bname%3D'Country'%5D%22).val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20interests%20%3D%20form.find('%5Bname%3D%22Interests-Label%22%5D').val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20firstDate%20%3D%20form.find('%5Bname%3D%22First-Choice-Date%22%5D').val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20firstTime%20%3D%20form.find('%5Bname%3D%22First-Choice-Time%22%5D').val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20secondDate%20%3D%20form.find('%5Bname%3D%22Second-Choice-Date%22%5D').val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20secondTime%20%3D%20form.find('%5Bname%3D%22Second-Choice-Time%22%5D').val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20comment%20%3D%20form.find('%5Bname%3D%22Comments%22%5D').val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20consent%20%3D%20form.find('%5Bname%3D%22Marketing-Consent%22%5D').is(%22%3Achecked%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20pageUrl%20%3D%20window.location.href%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20formID%20%3D%20form.find('%5Bname%3D%22Form-ID%22%5D').val()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20input%20%3D%20email%20%2B%20name%20%2B%20last%20%2B%20new%20Date().getTime()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20guid%20%3D%20await%20stringToGuidHash(input)%3B%0A%20%20%20%20%20%20%20%20if(form.find(%22%5Bname%3D'Unit'%5D%22).length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20str%20%3D%20form.find(%22%5Bname%3D'Unit'%5D%22).val()%3B%0A%20%20%20%20%20%20%20%20%20%20if(str%20!%3D%3D%20%22%22)%20add%20%3D%20add%20%2B%20%22%20%22%20%2B%20str%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(!window.location.hostname.includes(%22webflow.io%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20function%20trackScheduleRequest()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20klaviyo.push(%5B'track'%2C%20'Scheduled%20Request'%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Page%20URL'%3ApageUrl%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Form%20ID'%3AformID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Email'%3Aemail%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'First%20Name'%3Aname%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Last%20Name'%3Alast%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Phone%20Number'%3Atel%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Address'%3A%7B'Street'%3A%20add%2C%20'City'%3A%20city%2C%20'State'%3A%20reg%2C%20'ZIP%20Code'%3A%20zip%2C%20'Country'%3A%20cntry%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Interests'%3Ainterests%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'First%20Date%20Choice'%3AfirstDate%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'First%20Time%20Choice'%3AfirstTime%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Second%20Date%20Choice'%3AsecondDate%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Second%20Time%20Choice'%3AsecondTime%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Comments'%3Acomment%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Marketing'%3Aconsent%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20klaviyo.identify(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'email'%20%3A%20email%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'%24first_name'%3A%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'%24last_name'%3A%20last%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'%24phone_number'%3A%20tel%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%20trackScheduleRequest)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error(%22Klaviyo%20error%22%2C%20error)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if(form.attr(%22id%22).includes(%22wf-form-Appointment-Form%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20userData%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22email%22%3A%20email%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22phone_number%22%3A%20tel%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22address%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22first_name%22%3A%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22last_name%22%3A%20last%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22street%22%3A%20add%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22city%22%3A%20city%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22region%22%3A%20reg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22postal_code%22%3A%20zip%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22country%22%3A%20cntry%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20sessionStorage.setItem('ec_user_data'%2C%20JSON.stringify(userData))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Custom%20overwrite%20for%20POPUP%2FMS%20forms%0A%20%20%20%20%20%20%20%20if%20(form.attr(%22name%22).includes(%22Appointment-Form-Popup%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20guid%20is%20present%20in%20localStorage%20for%20the%20popup%20form%20-%20If%20so%20use%20it%20else%20ignore%0A%20%20%20%20%20%20%20%20%20%20const%20multiGUID%20%3D%20JSON.parse(%0A%20%20%20%20%20%20%20%20%20%20%20%20localStorage.getItem(formSessionKey)%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(multiGUID)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20form.find('%5Bname%3D%22Form-Guid%22%5D').val(multiGUID.guid)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20for%20all%20other%20forms%20set%20guid%20when%20submit%0A%20%20%20%20%20%20%20%20%20%20form.find('%5Bname%3D%22Form-Guid%22%5D').val(guid)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(multi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if(step.find(%22.form__submit%22).hasClass(%22is--val-error%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20step.find(%22.form__submit%22).removeClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20form.find(%22.form__submit%22).removeClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(form.data(%22name%22).includes(%22Appointment%20Form%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20loadingScreen.classList.add('open')%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(lottiePlayer%5B0%5D%20%26%26%20typeof%20lottiePlayer%5B0%5D.play%20%3D%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lottiePlayer%5B0%5D.play()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.warn(%22lottie%20err.%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20progressInterval%20%3D%20setInterval(()%20%3D%3E%20updateProgress(false)%2C%2024)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.ajax(%7B%0A%20%20%20%20%20%20%20%20%20%20url%3A%20%60%24%7BapiUrl%7D%2Ftest-domains%60%2C%0A%20%20%20%20%20%20%20%20%20%20dataType%3A%20%22json%22%2C%0A%20%20%20%20%20%20%20%20%20%20timeout%3A%203000%0A%20%20%20%20%20%20%20%20%7D).done(function(emails%2C%20textStatus%2C%20jqXHR)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(jqXHR.status%20%3D%3D%3D%20200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(Array.isArray(emails)%20%26%26%20emails.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20eParts%20%3D%20email.split(%22%40%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20eDomain%20%3D%20eParts%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(emails.includes(eDomain))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find('%5Bname%3D%22Test-Entry%22%5D').val(%22true%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.warn(%22Unexpected%20data%20format%20or%20empty%20response.%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.warn(%60Unexpected%20response%20status%3A%20%24%7BjqXHR.status%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D).fail(function(jqXHR%2C%20textStatus%2C%20errorThrown)%20%7B%0A%20%20%20%20%20%20%20%20%20%20console.error('Request%20failed%3A'%2C%20jqXHR%2C%20textStatus%2C%20errorThrown)%3B%0A%20%20%20%20%20%20%20%20%7D).always(function()%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(form.attr(%22id%22).includes(%22wf-form-Appointment-Form%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20deleteFormSession(formSessionKey)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Remove%20popup-guid%20if%20it%20was%20set%20%2B%20deleteFormSession(formPopupSessionKey)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20formRawData%20%3D%20new%20FormData(form%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20formData%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20formRawData.forEach((value%2C%20key)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(value%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20formData%5Bkey%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20formData.timestamp%20%3D%20Date.now()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20localStorage.setItem('schedule-request-submitted'%2C%20JSON.stringify(formData))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(form.attr(%22id%22).includes(%22wf-form-Appointment-Form-Popup%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20localStorage.setItem('popupFormInteracted'%2C%20%22true%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(multi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20progressForm(form%2C%20step%2C%20false%2C%20true)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20submitBtn.removeClass(%22is--loading%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(form.data(%22name%22).includes(%22Appointment%20Form%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(!window.location.hostname.includes(%22webflow.io%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20intellimize.sendEvent('schedule_request_form_submitted')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Intellimize%20error%3A'%2C%20e)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20formName%20%3D%20form.data(%22name%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataLayer.push(%7Bevent%3A%20'schedule'%2C%20formId%3A%20formName%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataLayer.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20event%3A%20'form_completed'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form_id%3A%20form.attr('id')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form_name%3A%20form.attr('name')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20user_id%3A%20email%20%7C%7C%20'unknown'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elapsed_time%3A%20typeof%20window.formStartTime%20%3D%3D%3D%20'number'%20%3F%20Date.now()%20-%20window.formStartTime%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!window.location.hostname.includes(%22webflow.io%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20CallTrk.captureForm(form%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.warn('CallTrk.captureForm%20failed%3A'%2C%20e)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20triggerFinalPhase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.submit()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%202500)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.submit()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(form.attr(%22id%22).includes(%22wf-form-Step-1-Form%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(form.find(%22%5Bname%3D'Submitted-Time'%5D%22).length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find(%22%5Bname%3D'Submitted-Time'%5D%22).val(Math.floor(Date.now()%20%2F%201000))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20formRawData%20%3D%20new%20FormData(form%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20formUrl%20%3D%20%22https%3A%2F%2Fstage-code.closetworld.com%2Fapi%2Fform%2Fstep-1%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20formData%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20formRawData.forEach((value%2C%20key)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20formData%5Bkey%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20step1Id%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.ajax(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20url%3A%20formUrl%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20'POST'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20contentType%3A%20'application%2Fjson'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20JSON.stringify(formData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataType%3A%20'json'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20success%3A%20function(responseData)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Success%3A'%2C%20responseData)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(responseData.success)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20step1Id%20%3D%20responseData.id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20submitBtn.removeClass(%22is--loading%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find(%22.form__submit%22).addClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find(%22.form__validation-msg%22).html('Form%20submission%20error.%20Please%20try%20again.%20If%20issue%20persist%2C%20contact%20us%20at%20%3Ca%20href%3D%22mailto%3Acustomerservice%40closetworld.com%22%20class%3D%22body-link%22%3E%3Cstrong%3Ecustomerservice%40closetworld.com%3C%2Fstrong%3E%3C%2Fa%3E')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20error%3A%20function(jqXHR%2C%20textStatus%2C%20errorThrown)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20submitBtn.removeClass(%22is--loading%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find(%22.form__submit%22).addClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.find(%22.form__validation-msg%22).html('Form%20submission%20error.%20Please%20try%20again.%20If%20issue%20persist%2C%20contact%20us%20at%20%3Ca%20href%3D%22mailto%3Acustomerservice%40closetworld.com%22%20class%3D%22body-link%22%3E%3Cstrong%3Ecustomerservice%40closetworld.com%3C%2Fstrong%3E%3C%2Fa%3E')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.error('Error%3A'%2C%20textStatus%2C%20errorThrown)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20complete%3A%20function(jqXHR%2C%20textStatus)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20urlParams%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Object.entries(formData).forEach((%5Bkey%2C%20value%5D)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20urlParams%5BgetMappedKey(key)%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20step1Request%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20timestamp%3A%20Date.now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(step1Id%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20urlParams%5B'step1-id'%5D%20%3D%20step1Id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20step1Request.id%20%3D%20step1Id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20localStorage.setItem(%22schedule-step1-data%22%2C%20JSON.stringify(step1Request))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20urlParams%5B'step1-form'%5D%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20urlParams%5B'step'%5D%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20queryString%20%3D%20new%20URLSearchParams(urlParams).toString()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20redirect%20%3D%20form.data(%22redirect%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20redirect%20%3D%20'%2Fschedulerequests-ms%3F'%20%2B%20queryString%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.attr(%22data-redirect%22%2C%20redirect)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.attr(%22redirect%22%2C%20redirect)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(form.data(%22name%22).includes(%22Appointment%20Form%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20formName%20%3D%20form.data(%22name%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataLayer.push(%7Bevent%3A%20'schedule'%2C%20formId%3A%20formName%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataLayer.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20event%3A%20'form_completed'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form_id%3A%20form.attr('id')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form_name%3A%20form.attr('name')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20user_id%3A%20email%20%7C%7C%20'unknown'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elapsed_time%3A%20typeof%20window.formStartTime%20%3D%3D%3D%20'number'%20%3F%20Date.now()%20-%20window.formStartTime%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!window.location.hostname.includes(%22webflow.io%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20CallTrk.captureForm(form%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.warn('CallTrk.captureForm%20failed%3A'%2C%20e)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20triggerFinalPhase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.submit()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%202500)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.submit()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20submitBtn.removeClass(%22is--loading%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(form.data(%22name%22).includes(%22Appointment%20Form%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(!window.location.hostname.includes(%22webflow.io%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20intellimize.sendEvent('schedule_request_form_submitted')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Intellimize%20error%3A'%2C%20e)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20formName%20%3D%20form.data(%22name%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataLayer.push(%7Bevent%3A%20'schedule'%2C%20formId%3A%20formName%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataLayer.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20event%3A%20'form_completed'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form_id%3A%20form.attr('id')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form_name%3A%20form.attr('name')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20user_id%3A%20email%20%7C%7C%20'unknown'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elapsed_time%3A%20typeof%20window.formStartTime%20%3D%3D%3D%20'number'%20%3F%20Date.now()%20-%20window.formStartTime%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!window.location.hostname.includes(%22webflow.io%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20CallTrk.captureForm(form%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.warn('CallTrk.captureForm%20failed%3A'%2C%20e)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20triggerFinalPhase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.submit()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%202500)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20form.submit()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20submitBtn.removeClass(%22is--loading%22)%3B%0A%20%20%20%20%20%20%20%20submitBtn.removeClass(%22events-none%22)%3B%0A%20%20%20%20%20%20%20%20console.log('Error')%3B%0A%20%20%20%20%20%20%20%20form.find(%22.form__submit%22).addClass(%22is--val-error%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%20%20%24(%22form%5Bname*%3D'Step-1-Form'%5D%22).submit(function(e)%20%7B%0A%20%20%20%20location.href%20%3D%20%24(this).data(%22redirect%22)%3B%0A%20%20%7D)%3B%0A%7D)%3B%0A%3C%2Fscript%3E"
      />
      <_Builtin.HtmlEmbed
        className="hidden-form-address"
        value="%3Cscript%20defer%20src%3D%22https%3A%2F%2Fmaps.googleapis.com%2Fmaps%2Fapi%2Fjs%3Fkey%3DAIzaSyD2oWyzGDG9z_95FonIzJs1wAB7dBcqkFc%26callback%3DinitAutocomplete%26libraries%3Dplaces%26v%3Dweekly%26loading%3Dasync%22%3E%3C%2Fscript%3E%0A%3Cscript%3E%0A%20%20async%20function%20initAutocomplete()%20%7B%0A%20%20%20%20let%20allForms%20%3D%20document.querySelectorAll(%22form%22)%3B%0A%0A%20%20%20%20allForms.forEach((form)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if(form.querySelector('.form__input--address'))%20%7B%0A%0A%20%20%20%20%20%20%20%20let%20autocomplete%2C%20address1Field%2C%20cityField%2C%20postalField%2C%20countryField%3B%0A%0A%20%20%20%20%20%20%20%20address1Field%20%3D%20form.querySelector('.form__input--address')%3B%0A%20%20%20%20%20%20%20%20cityField%20%3D%20form.querySelector('input%5Bname%3D%22City%22%5D')%3B%0A%20%20%20%20%20%20%20%20postalField%20%3D%20form.querySelector('input%5Bname%3D%22ZIP-Code%22%5D')%3B%0A%20%20%20%20%20%20%20%20countryField%20%3D%20form.querySelector('input%5Bname%3D%22Country%22%5D')%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20the%20autocomplete%20object%2C%20restricting%20the%20search%20predictions%20to%20addresses%20in%20the%20US%20and%20Canada%0A%20%20%20%20%20%20%20%20autocomplete%20%3D%20new%20google.maps.places.Autocomplete(address1Field%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20componentRestrictions%3A%20%7B%20country%3A%20%5B%22us%22%2C%20%22ca%22%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20fields%3A%20%5B%22address_components%22%2C%20%22geometry%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20types%3A%20%5B%22address%22%5D%2C%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20autocomplete.inputId%20%3D%20address1Field.id%3B%0A%20%20%20%20%20%20%20%20autocomplete.addListener(%22place_changed%22%2C%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20the%20place%20details%20from%20the%20autocomplete%20object.%0A%20%20%20%20%20%20%20%20%20%20const%20place%20%3D%20this.getPlace()%3B%0A%20%20%20%20%20%20%20%20%20%20let%20address1%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20let%20city%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20let%20postcode%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20let%20state%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20let%20country%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20let%20hasLocality%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(const%20component%20of%20place.address_components)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%09const%20types%20%3D%20component.types%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(types.includes(%22locality%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20hasLocality%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20each%20component%20of%20the%20address%20from%20the%20place%20details%2C%20and%20then%20fill-in%20the%20corresponding%20field%20on%20the%20form.%20place.address_components%20are%20google.maps.GeocoderAddressComponent%20objects%20which%20are%20documented%20at%20http%3A%2F%2Fgoo.gle%2F3l5i5Mr%0A%20%20%20%20%20%20%20%20%20%20for%20(const%20component%20of%20place.address_components)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20types%20%3D%20component.types%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(types.includes(%22street_number%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20address1%20%3D%20%60%24%7Bcomponent.long_name%7D%20%24%7Baddress1%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(types.includes(%22route%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20address1%20%2B%3D%20component.short_name%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(types.includes(%22locality%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20city%20%3D%20component.long_name%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(types.includes(%22sublocality%22)%20%26%26%20!hasLocality)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20city%20%3D%20component.long_name%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(types.includes(%22postal_code%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20postcode%20%3D%20%60%24%7Bcomponent.long_name%7D%24%7Bpostcode%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(types.includes(%22administrative_area_level_1%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20state%20%3D%20component.short_name%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(types.includes(%22country%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20country%20%3D%20component.short_name%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20let%20addressField%20%3D%20document.querySelector(%22%23%22%20%2B%20this.inputId)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20form%20%3D%20addressField.form%3B%0A%20%20%20%20%20%20%20%20%20%20let%20cityField%20%3D%20form.querySelector('input%5Bname%3D%22City%22%5D')%3B%0A%20%20%20%20%20%20%20%20%20%20let%20zipField%20%3D%20form.querySelector('input%5Bname%3D%22ZIP-Code%22%5D')%3B%0A%20%20%20%20%20%20%20%20%20%20let%20stateField%20%3D%20form.querySelector('select%5Bname%3D%22State%22%5D')%3B%0A%20%20%20%20%20%20%20%20%20%20let%20countryField%20%3D%20form.querySelector('select%5Bname%3D%22Country%22%5D')%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if(countryField.value%20!%3D%3D%20country)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20changeCountry(%24(form)%2C%20country)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20addressField.value%20%3D%20address1%3B%0A%20%20%20%20%20%20%20%20%20%20cityField.value%20%3D%20city%3B%0A%20%20%20%20%20%20%20%20%20%20zipField.value%20%3D%20postcode%3B%0A%20%20%20%20%20%20%20%20%20%20stateField.value%20%3D%20state%3B%0A%20%20%20%20%20%20%20%20%20%20countryField.value%20%3D%20country%3B%0A%0A%0A%20%20%20%20%20%20%20%20%20%20autocompleteEvent%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20addressField.dispatchEvent(new%20Event('change'%2C%20%7B%20'bubbles'%3A%20true%20%7D))%3B%0A%20%20%20%20%20%20%20%20%20%20cityField.dispatchEvent(new%20Event('change'%2C%20%7B%20'bubbles'%3A%20true%20%7D))%3B%0A%20%20%20%20%20%20%20%20%20%20zipField.dispatchEvent(new%20Event('change'%2C%20%7B%20'bubbles'%3A%20true%20%7D))%3B%0A%20%20%20%20%20%20%20%20%20%20stateField.dispatchEvent(new%20Event('change'%2C%20%7B%20'bubbles'%3A%20true%20%7D))%3B%0A%20%20%20%20%20%20%20%20%20%20countryField.dispatchEvent(new%20Event('change'%2C%20%7B%20'bubbles'%3A%20true%20%7D))%3B%0A%0A%20%20%20%20%20%20%20%20%20%20autocompleteEvent%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20window.initAutocomplete%20%3D%20initAutocomplete%3B%0A%3C%2Fscript%3E"
      />
    </_Component>
  );
}
